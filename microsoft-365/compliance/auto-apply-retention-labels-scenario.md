---
title: Usare le etichette di conservazione per gestire il ciclo di vita dei documenti archiviati in SharePoint
f1.keywords:
- NOCSH
ms.author: cabailey
author: cabailey
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Priority
ms.collection:
- M365-security-compliance
- SPO_Content
search.appverid:
- MOE150
- MET150
description: Come usare le etichette di conservazione per gestire il ciclo di vita dei documenti in SharePoint tramite l’uso dei metadati, per classificare il contenuto, applicare automaticamente le etichette e usare la conservazione basata su eventi per avviare il periodo di conservazione.
ms.openlocfilehash: 321043a8a33d274ed9e7caecfb167b9587ceae1d
ms.sourcegitcommit: 9f5b136b96b3af4db4cc6f5b1f35130ae60d6b12
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 09/15/2020
ms.locfileid: "47817253"
---
# <a name="use-retention-labels-to-manage-the-lifecycle-of-documents-stored-in-sharepoint"></a><span data-ttu-id="a1795-103">Usare le etichette di conservazione per gestire il ciclo di vita dei documenti archiviati in SharePoint</span><span class="sxs-lookup"><span data-stu-id="a1795-103">Use retention labels to manage the lifecycle of documents stored in SharePoint</span></span>

><span data-ttu-id="a1795-104">*[Indicazioni per l'assegnazione di licenze di Microsoft 365 per sicurezza e conformità](https://aka.ms/ComplianceSD).*</span><span class="sxs-lookup"><span data-stu-id="a1795-104">*[Microsoft 365 licensing guidance for security & compliance](https://aka.ms/ComplianceSD).*</span></span>

<span data-ttu-id="a1795-105">Questo articolo descrive come gestire il ciclo di vita dei documenti archiviati in SharePoint attraverso l’utilizzo delle etichette di conservazione applicate in automatico e la conservazione basata su eventi.</span><span class="sxs-lookup"><span data-stu-id="a1795-105">This article describes how you can manage the lifecycle of documents that are stored in SharePoint by using automatically applied retention labels and event-based retention.</span></span>

<span data-ttu-id="a1795-106">La funzionalità di applicazione automatica utilizza i metadati di SharePoint per la classificazione dei documenti.</span><span class="sxs-lookup"><span data-stu-id="a1795-106">The auto-apply functionality uses SharePoint metadata for document classification.</span></span> <span data-ttu-id="a1795-107">L’esempio esposto in questo articolo si riferisce ai documenti relativi al prodotto, ma gli stessi concetti risultano validi anche per altri scenari.</span><span class="sxs-lookup"><span data-stu-id="a1795-107">The example in this article is for product-related documents, but the same concepts can be used for other scenarios.</span></span> <span data-ttu-id="a1795-108">Per esempio, nel settore petrolifero e del gas naturale, è possibile utilizzarlo per gestire il ciclo di vita dei documenti relativi alle risorse fisiche come le piattaforme petrolifere e le registrazioni di log geofisici oppure le licenze di produzione.</span><span class="sxs-lookup"><span data-stu-id="a1795-108">For example, in the oil and gas industry, you could use it to manage the lifecycle of documents about physical assets such as oil platforms, well logs, or production licenses.</span></span> <span data-ttu-id="a1795-109">Nel settore dei servizi finanziari, è possibile gestire i documenti relativi a conti bancari, mutui o contratti di assicurazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-109">In the financial services industry, you could manage bank account, mortgage, or insurance contract documents.</span></span> <span data-ttu-id="a1795-110">Nel settore pubblico, è possibile gestire i permessi di costruzione o i moduli fiscali.</span><span class="sxs-lookup"><span data-stu-id="a1795-110">In the public sector, you could manage construction permits or tax forms.</span></span>

<span data-ttu-id="a1795-111">In questo articolo, l'analisi partirà dall'architettura delle informazioni e dalla definizione delle etichette di conservazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-111">In this article, we'll look at the information architecture and definition of the retention labels.</span></span> <span data-ttu-id="a1795-112">Poi classificheremo i documenti con l’applicazione automatica delle etichette.</span><span class="sxs-lookup"><span data-stu-id="a1795-112">Then we'll classify documents by auto-applying the labels.</span></span> <span data-ttu-id="a1795-113">E infine genereremo gli eventi che avviano il periodo di conservazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-113">And finally we'll generate the events that initiate the retention period.</span></span>

## <a name="information-architecture"></a><span data-ttu-id="a1795-114">Architettura delle informazioni</span><span class="sxs-lookup"><span data-stu-id="a1795-114">Information architecture</span></span>

<span data-ttu-id="a1795-115">Il nostro scenario corrisponde a quello di un'azienda manifatturiera che usa SharePoint per archiviare tutti i documenti relativi ai prodotti che sviluppa.</span><span class="sxs-lookup"><span data-stu-id="a1795-115">Our scenario is a manufacturing company that uses SharePoint to store all the documents about the products that the company develops.</span></span> <span data-ttu-id="a1795-116">Tali documenti includono specifiche di prodotto, contratti con fornitori e manuali utenti.</span><span class="sxs-lookup"><span data-stu-id="a1795-116">These documents include product specifications, agreements with suppliers, and user manuals.</span></span> <span data-ttu-id="a1795-117">Quando un documento viene archiviato in SharePoint mediante i criteri di gestione dei contenuti aziendali, si definiscono i metadati specifici del documento, che vengono utilizzati per classificarlo.</span><span class="sxs-lookup"><span data-stu-id="a1795-117">When these documents are stored in SharePoint through Enterprise Content Management policies, document metadata is defined, which is used to classify them.</span></span> <span data-ttu-id="a1795-118">In termini di metadati, ogni documento ha le seguenti proprietà:</span><span class="sxs-lookup"><span data-stu-id="a1795-118">Each document has the following metadata properties:</span></span>

- <span data-ttu-id="a1795-119">**Tipo di documento** (come specifica di prodotto, contratto o manuale utente)</span><span class="sxs-lookup"><span data-stu-id="a1795-119">**Doc Type** (such as product specification, agreement, or user manual)</span></span>

- <span data-ttu-id="a1795-120">**Nome del prodotto**</span><span class="sxs-lookup"><span data-stu-id="a1795-120">**Product Name**</span></span>

- <span data-ttu-id="a1795-121">**Stato** (bozza o finale)</span><span class="sxs-lookup"><span data-stu-id="a1795-121">**Status** (draft or final)</span></span>

<span data-ttu-id="a1795-122">Per tutti i documenti, i metadati formano una tipologia di contenuto di base denominata *Documento di produzione*.</span><span class="sxs-lookup"><span data-stu-id="a1795-122">This metadata forms a base content type called *Production Document* for all the documents.</span></span>

![Tabella dei metadati della documentazione del prodotto](../media/SPRetention1.png)

> [!NOTE]
> <span data-ttu-id="a1795-124">In una fase successiva di questo scenario, i criteri di conservazione useranno le proprietà **Tipo di documento** e **Stato** per classificare e applicare in modo automatico le etichette di conservazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-124">The **Doc Type** and **Status** properties are used by retention policies later in this scenario to classify and auto-apply retention labels.</span></span>

<span data-ttu-id="a1795-125">È possibile avere varie tipologie di contenuti che rappresentano differenti tipi di documenti, ma ora si concentri l'attenzione sulla documentazione del prodotto.</span><span class="sxs-lookup"><span data-stu-id="a1795-125">We might have several content types that represent different types of documents, but let's focus on the product documentation.</span></span>

<span data-ttu-id="a1795-126">In questo scenario, si usa il Servizio metadati gestiti e l'Archivio termini per creare un set di termini per *Tipo di documento* e un altro set per *Nome del prodotto*.</span><span class="sxs-lookup"><span data-stu-id="a1795-126">In this scenario, we use the Managed Metadata service and the Term Store to create a term set for *Doc Type* and another one for *Product Name*.</span></span> <span data-ttu-id="a1795-127">Per ogni set di termini, si crea un termine per ciascun valore.</span><span class="sxs-lookup"><span data-stu-id="a1795-127">For each term set, we create a term for each value.</span></span> <span data-ttu-id="a1795-128">Nell'Archivio termini per la propria organizzazione di SharePoint, apparirà in modo simile a questo:</span><span class="sxs-lookup"><span data-stu-id="a1795-128">It would look like something like this in Term Store for your SharePoint organization:</span></span>

![Set di termini di esempio per la documentazione del prodotto nell'Archivio termini](../media/SPRetention2.png)

<span data-ttu-id="a1795-130">Le *tipologie di contenuto* possono essere create e pubblicate con l'[Hub tipo di contenuto](https://support.office.com/article/manage-content-type-publishing-06f39ac0-5576-4b68-abbc-82b68334889b).</span><span class="sxs-lookup"><span data-stu-id="a1795-130">*Content Type* can be created and published by using the [Content Type Hub](https://support.office.com/article/manage-content-type-publishing-06f39ac0-5576-4b68-abbc-82b68334889b).</span></span> <span data-ttu-id="a1795-131">È anche possibile creare e pubblicare un tipo di contenuto utilizzando strumenti di provisioning del sito come l'apposito [framework PnP](https://docs.microsoft.com/sharepoint/dev/solution-guidance/pnp-provisioning-framework) o lo [schema JSON di progettazione del sito](https://docs.microsoft.com/sharepoint/dev/declarative-customization/site-design-json-schema#define-a-new-content-type).</span><span class="sxs-lookup"><span data-stu-id="a1795-131">You can also create and publish a content type by using site provisioning tools, such as the [PnP provisioning framework](https://docs.microsoft.com/sharepoint/dev/solution-guidance/pnp-provisioning-framework) or [site design JSON schema](https://docs.microsoft.com/sharepoint/dev/declarative-customization/site-design-json-schema#define-a-new-content-type).</span></span>

<span data-ttu-id="a1795-132">Ciascun prodotto dispone di un sito di SharePoint dedicato, contenente una raccolta documenti con le corrette tipologie di contenuto abilitate.</span><span class="sxs-lookup"><span data-stu-id="a1795-132">Each product has a dedicated SharePoint site that contains one document library that has the right content types enabled.</span></span> <span data-ttu-id="a1795-133">Tutti i documenti vengono archiviati in questa raccolta.</span><span class="sxs-lookup"><span data-stu-id="a1795-133">All documents are stored in this document library.</span></span>

<span data-ttu-id="a1795-134">[ ![Raccolta documenti per la documentazione del prodotto](../media/SPRetention3.png) ](../media/SPRetention3.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-134">[ ![Document library for product documentation](../media/SPRetention3.png) ](../media/SPRetention3.png#lightbox)</span></span>

> [!NOTE]
> <span data-ttu-id="a1795-135">Invece di avere un sito di SharePoint per ogni prodotto, l'azienda manifatturiera di questo scenario potrebbe usare un Microsoft Teams per ogni prodotto per supportare la collaborazione tra i membri del team, ad esempio con una chat permanente, e usare la scheda **File** per la gestione dei documenti all'interno di Teams.</span><span class="sxs-lookup"><span data-stu-id="a1795-135">Instead of having a SharePoint site per product, the manufacturing company in this scenario could use a Microsoft Team per product to support collaboration among members of the team, such as through persistent chat, and use the **Files** tab in Teams for document management.</span></span> <span data-ttu-id="a1795-136">In questo articolo, il focus è diretto esclusivamente ai documenti, quindi si userà soltanto un sito.</span><span class="sxs-lookup"><span data-stu-id="a1795-136">In this article we only focus on documents, so, we'll only use a site.</span></span>

<span data-ttu-id="a1795-137">Ecco visualizzata la raccolta di documenti per il prodotto Spinning Widget:</span><span class="sxs-lookup"><span data-stu-id="a1795-137">Here's a view of the document library for the Spinning Widget product:</span></span>

<span data-ttu-id="a1795-138">[ ![Raccolta documenti di Spinning Widget](../media/SPRetention4.png) ](../media/SPRetention4.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-138">[ ![Spinning Widget document library](../media/SPRetention4.png) ](../media/SPRetention4.png#lightbox)</span></span>

<span data-ttu-id="a1795-139">Ora che è stata definita l'architettura delle informazioni di base per la gestione dei documenti, si passerà all'esame della strategia di conservazione ed eliminazione dei documenti che usano i metadati e alla loro classificazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-139">Now that we have the basic information architecture in place for document management, let's look at the retention and disposal strategy for the documents that use the metadata and how we classify those documents.</span></span>

## <a name="retention-and-disposition"></a><span data-ttu-id="a1795-140">Conservazione ed eliminazione</span><span class="sxs-lookup"><span data-stu-id="a1795-140">Retention and disposition</span></span>

<span data-ttu-id="a1795-141">I criteri di conformità e governance dei dati dell'azienda manifatturiera stabiliscono le modalità di mantenimento ed eliminazione di tali dati.</span><span class="sxs-lookup"><span data-stu-id="a1795-141">The manufacturing company's compliance and data governance policies dictate how data is preserved and disposed of.</span></span> <span data-ttu-id="a1795-142">I documenti relativi al prodotto devono essere conservati per tutto il tempo della produzione e per un determinato periodo aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="a1795-142">Product-related documents must be kept for as long as the product is manufactured and for a certain additional period.</span></span> <span data-ttu-id="a1795-143">Il periodo aggiuntivo in questione cambia a seconda che si tratti di specifiche di prodotto, contratti o manuali utenti.</span><span class="sxs-lookup"><span data-stu-id="a1795-143">The additional period differs for product specifications, agreements, and user manuals.</span></span> <span data-ttu-id="a1795-144">La tabella seguente indica i requisiti di conservazione ed eliminazione:</span><span class="sxs-lookup"><span data-stu-id="a1795-144">The following table indicates the retention and disposition requirements:</span></span>

|   <span data-ttu-id="a1795-145">Tipo di documento</span><span class="sxs-lookup"><span data-stu-id="a1795-145">Document type</span></span>            |   <span data-ttu-id="a1795-146">Conservazione</span><span class="sxs-lookup"><span data-stu-id="a1795-146">Retention</span></span>                            |   <span data-ttu-id="a1795-147">Eliminazione</span><span class="sxs-lookup"><span data-stu-id="a1795-147">Disposition</span></span>                                |
| -------------------------- | -------------------------------------- | -------------------------------------------- |
| <span data-ttu-id="a1795-148">Specifiche del prodotto</span><span class="sxs-lookup"><span data-stu-id="a1795-148">Product specifications</span></span>      | <span data-ttu-id="a1795-149">5 anni dopo l'interruzione della produzione</span><span class="sxs-lookup"><span data-stu-id="a1795-149">5 years after production stops</span></span>  | <span data-ttu-id="a1795-150">Elimina</span><span class="sxs-lookup"><span data-stu-id="a1795-150">Delete</span></span>                                       |
| <span data-ttu-id="a1795-151">Contratti di prodotto</span><span class="sxs-lookup"><span data-stu-id="a1795-151">Product agreements</span></span>          | <span data-ttu-id="a1795-152">10 anni dopo l'interruzione della produzione</span><span class="sxs-lookup"><span data-stu-id="a1795-152">10 years after production stops</span></span> | <span data-ttu-id="a1795-153">Revisione</span><span class="sxs-lookup"><span data-stu-id="a1795-153">Review</span></span>                                       |
| <span data-ttu-id="a1795-154">Manuali per gli utenti</span><span class="sxs-lookup"><span data-stu-id="a1795-154">User manuals</span></span>                | <span data-ttu-id="a1795-155">5 anni dopo l'interruzione della produzione</span><span class="sxs-lookup"><span data-stu-id="a1795-155">5 years after production stops</span></span>  | <span data-ttu-id="a1795-156">Elimina</span><span class="sxs-lookup"><span data-stu-id="a1795-156">Delete</span></span>                                       |
| <span data-ttu-id="a1795-157">Tutti gli altri tipi di documenti</span><span class="sxs-lookup"><span data-stu-id="a1795-157">All other types of documents</span></span> | <span data-ttu-id="a1795-158">Non conservare attivamente</span><span class="sxs-lookup"><span data-stu-id="a1795-158">Don't actively retain</span></span>  | <span data-ttu-id="a1795-159">Eliminare i documenti vecchi di 3 anni</span><span class="sxs-lookup"><span data-stu-id="a1795-159">Delete when document is older than 3 years</span></span> <br /><br /> <span data-ttu-id="a1795-160">Un documento si considera vecchio di 3 anni se non ha subito modifiche durante gli ultimi 3 anni.</span><span class="sxs-lookup"><span data-stu-id="a1795-160">A document is considered older than 3 years if it hasn't been modified within the last 3 years.</span></span> |
|||

<span data-ttu-id="a1795-161">Utilizziamo il Centro conformità Microsoft 365 per creare le seguenti [etichette di conservazione](retention.md#retention-labels):</span><span class="sxs-lookup"><span data-stu-id="a1795-161">We use the Microsoft 365 compliance center to create the following [retention labels](retention.md#retention-labels):</span></span>

  - <span data-ttu-id="a1795-162">Specifica di prodotto</span><span class="sxs-lookup"><span data-stu-id="a1795-162">Product Specification</span></span>

  - <span data-ttu-id="a1795-163">Contratto di prodotto</span><span class="sxs-lookup"><span data-stu-id="a1795-163">Product Agreement</span></span>

  - <span data-ttu-id="a1795-164">Manuale utente</span><span class="sxs-lookup"><span data-stu-id="a1795-164">User Manual</span></span>

<span data-ttu-id="a1795-165">In questo articolo, si illustreranno le modalità di creazione e applicazione automatica dell'etichetta di conservazione Specifica di prodotto.</span><span class="sxs-lookup"><span data-stu-id="a1795-165">In this article, we only show how to create and auto-apply the Product Specification retention label.</span></span> <span data-ttu-id="a1795-166">Per implementare lo scenario completo, procedere anche alla creazione e applicazione automatica delle etichette di conservazione per le altre due tipologie di documento.</span><span class="sxs-lookup"><span data-stu-id="a1795-166">To implement the complete scenario, you would also create and auto-apply retention labels for the other two document types.</span></span>

### <a name="settings-for-the-product-specification-retention-label"></a><span data-ttu-id="a1795-167">Impostazioni per l'etichetta di conservazione Specifica di prodotto</span><span class="sxs-lookup"><span data-stu-id="a1795-167">Settings for the Product Specification retention label</span></span>

<span data-ttu-id="a1795-168">Ecco il [piano di archiviazione](file-plan-manager.md) per l'etichetta di conservazione Specifica di prodotto:</span><span class="sxs-lookup"><span data-stu-id="a1795-168">Here's the [file plan](file-plan-manager.md) for the Product Specification retention label:</span></span>

- <span data-ttu-id="a1795-169">**Nome:** Specifica di prodotto</span><span class="sxs-lookup"><span data-stu-id="a1795-169">**Name:** Product Specification</span></span>

- <span data-ttu-id="a1795-170">**Descrizione per gli utenti:** mantenere per 5 anni dopo l’arresto della produzione.</span><span class="sxs-lookup"><span data-stu-id="a1795-170">**Description for users:** Retain for 5 years after production stops.</span></span>

- <span data-ttu-id="a1795-171">**Descrizione per gli amministratori:** conservare fino a 5 anni dopo l’arresto della produzione; eliminazione automatica; conservazione basata su eventi, con tipo di evento *Cessazione del prodotto*.</span><span class="sxs-lookup"><span data-stu-id="a1795-171">**Description for admins:** Retain for 5 years after production stops, auto delete, event-based retention, event type is *Product Cessation*.</span></span>

- <span data-ttu-id="a1795-172">**Azione di conservazione:** conservare ed eliminare.</span><span class="sxs-lookup"><span data-stu-id="a1795-172">**Retention action:** Retain and delete.</span></span>

- <span data-ttu-id="a1795-173">**Durata di conservazione:** 5 anni (1.825 giorni).</span><span class="sxs-lookup"><span data-stu-id="a1795-173">**Retention duration:** 5 years (1,825 days).</span></span>

- <span data-ttu-id="a1795-174">**Etichetta record**: configurare l'etichetta di conservazione per contrassegnare elementi come [record](records-management.md#records), ossia i documenti etichettati non possono essere modificati cancellati dagli utenti.</span><span class="sxs-lookup"><span data-stu-id="a1795-174">**Record label**: Configure the retention label to mark items as a [record](records-management.md#records), which means the labeled documents can't then be modified or deleted by users.</span></span>

- <span data-ttu-id="a1795-175">**Descrittori del piano di archiviazione:** per semplificare lo scenario, non sono forniti descrittori di file facoltativi.</span><span class="sxs-lookup"><span data-stu-id="a1795-175">**File plan descriptors:** For simplifying the scenario, no optional file descriptors are provided.</span></span>

<span data-ttu-id="a1795-176">La schermata seguente mostra le impostazioni quando si crea l'etichetta di conservazione Specifica di prodotto nel Centro conformità Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a1795-176">The following screenshot shows the settings when you create the Product Specification retention label in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="a1795-177">È possibile creare la tipologia di evento *Cessazione del prodotto* al momento della creazione dell'etichetta di conservazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-177">You can create the *Product Cessation* event type when you create the retention label.</span></span> <span data-ttu-id="a1795-178">Vedere la procedura nella sezione seguente.</span><span class="sxs-lookup"><span data-stu-id="a1795-178">See the procedure in the following section.</span></span>

![Impostazioni di conservazione per l'etichetta Specifica di prodotto](../media/SPRetention5.png)

> [!NOTE]
> <span data-ttu-id="a1795-180">Per evitare un'attesa di 5 anni per l'eliminazione dei documenti, impostare la durata di conservazione su ***1 giorno*** se si ricrea questo scenario in un ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="a1795-180">To avoid a 5-year wait for document deletion, set the retention duration to ***1 day*** if you're recreating this scenario in a test environment.</span></span>

### <a name="create-an-event-type-when-you-create-a-retention-label"></a><span data-ttu-id="a1795-181">Creare un tipo di evento quando si crea un'etichetta di conservazione</span><span class="sxs-lookup"><span data-stu-id="a1795-181">Create an event type when you create a retention label</span></span>

1. <span data-ttu-id="a1795-182">Nella pagina **Definisci impostazioni di conservazione** della procedura guidata Crea etichetta di conservazione, dopo **Avvia il periodo di conservazione in base a**, selezionare **Crea nuovo tipo di evento**:</span><span class="sxs-lookup"><span data-stu-id="a1795-182">On the **Define retention settings** page of the Create retention label wizard, after **Start the retention period based on**, select **Create new event type**:</span></span>
    
    ![Creare un nuovo tipo di evento per la finestra di dialogo Specifica di prodotto](../media/SPRetention6.png)

3. <span data-ttu-id="a1795-184">Nella pagina **Nomina il tuo tipo di evento**, scrivere **Cessazione prodotto** e aggiungere una descrizione facoltativa.</span><span class="sxs-lookup"><span data-stu-id="a1795-184">On the **Name your event type** page, enter **Product Cessation** and an optional description.</span></span> <span data-ttu-id="a1795-185">Selezionare **Avanti**, **Invia**, e **Fatto**.</span><span class="sxs-lookup"><span data-stu-id="a1795-185">Then select **Next**, **Submit**, and **Done**.</span></span>

4. <span data-ttu-id="a1795-186">Tornare alla pagina **Definisci impostazioni di conservazione**. Nell'opzione **Avvia il periodo di conservazione in base a**, usare la casella a discesa per selezionare il tipo di evento **Cessazione prodotto** creato.</span><span class="sxs-lookup"><span data-stu-id="a1795-186">Back on the **Define retention settings** page, for **Start the retention period based on**, use the dropdown box to select the **Product Cessation** event type that you created.</span></span>
    
    <span data-ttu-id="a1795-187">Ecco come appaiono le impostazioni per l'etichetta di conservazione Specifica di prodotto:</span><span class="sxs-lookup"><span data-stu-id="a1795-187">Here's what the settings look like for the Product Specification retention label:</span></span> 
    
   ![Impostazioni per la nuova etichetta Specifica di prodotto](../media/SPRetention7.png)

6. <span data-ttu-id="a1795-189">Selezionare **Crea etichetta** e, nella pagina successiva, quando compare l'opzione per pubblicare l'etichetta, applicare automaticamente o salvare l'etichetta: selezionare **Salva l'etichetta per ora** e fare clic su **Fatto**.</span><span class="sxs-lookup"><span data-stu-id="a1795-189">Select **Create label**, and on the next page when you see the options to publish the label, auto-apply the label, or just save the label: Select **Just save the label for now**, and then select **Done**.</span></span> 
    
    > [!TIP]
    > <span data-ttu-id="a1795-190">Per informazioni più dettagliate sui vari passaggi, consultare [Creare un'etichetta il cui periodo di conservazione è basato su un evento](event-driven-retention.md#step-1-create-a-label-whose-retention-period-is-based-on-an-event).</span><span class="sxs-lookup"><span data-stu-id="a1795-190">For more detailed steps, see [Create a label whose retention period is based on an event](event-driven-retention.md#step-1-create-a-label-whose-retention-period-is-based-on-an-event).</span></span>

<span data-ttu-id="a1795-191">Ora passeremo a come applicare automaticamente le etichette ai contenuti delle specifiche di prodotto.</span><span class="sxs-lookup"><span data-stu-id="a1795-191">Now let's look at how we'll auto-apply the retention label to product-specification content.</span></span>

## <a name="auto-apply-retention-labels-to-documents"></a><span data-ttu-id="a1795-192">Applicare automaticamente le etichette di conservazione</span><span class="sxs-lookup"><span data-stu-id="a1795-192">Auto-apply retention labels to documents</span></span>

<span data-ttu-id="a1795-193">Ora si procederà con l'[applicazione automatica](apply-retention-labels-automatically.md) delle etichette di conservazione create, usando Keyword Query Language (KQL).</span><span class="sxs-lookup"><span data-stu-id="a1795-193">We're going to use Keyword Query Language (KQL) to [auto-apply](apply-retention-labels-automatically.md) the retention labels that we created.</span></span> <span data-ttu-id="a1795-194">KQL è il linguaggio che viene utilizzato per la creazione di query di ricerca.</span><span class="sxs-lookup"><span data-stu-id="a1795-194">KQL is the language that's used to build search queries.</span></span> <span data-ttu-id="a1795-195">Con KQL è possibile compiere ricerche in base a parole chiave o proprietà gestite.</span><span class="sxs-lookup"><span data-stu-id="a1795-195">In KQL, you can search by using keywords or managed properties.</span></span> <span data-ttu-id="a1795-196">Per maggiori informazioni, vedere le [informazioni di riferimento sulla sintassi KQL (Keyword Query Language)](https://docs.microsoft.com/sharepoint/dev/general-development/keyword-query-language-kql-syntax-reference).</span><span class="sxs-lookup"><span data-stu-id="a1795-196">For more information, see [Keyword Query Language (KQL) syntax reference](https://docs.microsoft.com/sharepoint/dev/general-development/keyword-query-language-kql-syntax-reference).</span></span>

<span data-ttu-id="a1795-197">In pratica, si vuole dire a Microsoft 365 che “applichi l'etichetta di conservazione **Specifica di prodotto** a tutti i documenti che hanno **Finale** come **Stato** e **Specifica di prodotto** come **Tipo di documento**”.</span><span class="sxs-lookup"><span data-stu-id="a1795-197">Basically, we want to tell Microsoft 365 to "apply the **Product Specification** retention label to all documents that have a **Status** of **Final** and a **Doc Type** of **Product Specification**."</span></span> <span data-ttu-id="a1795-198">Si ricordi che **Stato** e **Tipo di documento** sono le colonne del sito definite per il tipo di contenuto Documentazione di prodotto nella sezione [Architettura delle informazioni](#information-architecture).</span><span class="sxs-lookup"><span data-stu-id="a1795-198">Recall that **Status** and **Doc Type** are the site columns that we defined for the Product Documentation content type in the [Information architecture](#information-architecture) section.</span></span> <span data-ttu-id="a1795-199">Per compiere questa operazione, è necessario configurare lo schema di ricerca.</span><span class="sxs-lookup"><span data-stu-id="a1795-199">To do this, we need to configure the search schema.</span></span>

<span data-ttu-id="a1795-200">Quando SharePoint indicizza i contenuti, per ogni colonna del sito genera automaticamente delle proprietà sottoposte a ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-200">When SharePoint indexes content, it automatically generates crawled properties for each site column.</span></span> <span data-ttu-id="a1795-201">In questo scenario, l'interesse si concentra sulle proprietà **Tipo di documento** e **Stato**.</span><span class="sxs-lookup"><span data-stu-id="a1795-201">For this scenario, we're interested in the **Doc Type** and **Status** properties.</span></span> <span data-ttu-id="a1795-202">Affinché la ricerca crei delle proprietà sottoposte a ricerca per indicizzazione, all'interno della raccolta risulterà necessaria la presenza di documenti che costituiscano il tipo di contenuto corretto e che le colonne del sito siano compilate.</span><span class="sxs-lookup"><span data-stu-id="a1795-202">We need documents in the library that are the right content type and have the site columns filled in for search to create the crawled properties.</span></span>

<span data-ttu-id="a1795-203">Nell'interfaccia di amministrazione di SharePoint, aprire le configurazioni di ricerca e selezionare **Gestisci schema di ricerca** per visualizzare e configurare le proprietà sottoposte a ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-203">In the SharePoint admin center, open the Search configuration, and select **Manage Search Schema** to view and configure the crawled properties.</span></span>

![Proprietà sottoposte a ricerca per indicizzazione nello schema di ricerca](../media/SPRetention8.png)

<span data-ttu-id="a1795-205">Se si digita ***stato*** nella casella **Proprietà sottoposte a ricerca per indicizzazione** e si seleziona la freccia verde, si visualizza un risultato simile a questo:</span><span class="sxs-lookup"><span data-stu-id="a1795-205">If we type ***status*** in the **Crawled properties** box and select the green arrow, we should see a result like this:</span></span>

![La proprietà sottoposta a ricerca per indicizzazione ows_Status](../media/SPRetention9.png)

<span data-ttu-id="a1795-207">La proprietà **ows\_\_Status**, notare il doppio carattere di sottolineatura, è l'oggetto di interesse.</span><span class="sxs-lookup"><span data-stu-id="a1795-207">The **ows\_\_Status** property (notice the double underscore) is the one that interests us.</span></span> <span data-ttu-id="a1795-208">Questa esegue il mapping alla proprietà **Stato** del tipo di contenuto Documento di produzione.</span><span class="sxs-lookup"><span data-stu-id="a1795-208">It maps to the **Status** property of the Production Document content type.</span></span>

<span data-ttu-id="a1795-209">Ora, se si digita ***ows\_doc*** e si seleziona la freccia verde, si visualizza qualcosa di simile a questo:</span><span class="sxs-lookup"><span data-stu-id="a1795-209">Now, if we type ***ows\_doc*** and select the green arrow, we should see something like this:</span></span>

![La proprietà sottoposta a ricerca per indicizzazione ows_Doc_Type](../media/SPRetention10.png)

<span data-ttu-id="a1795-211">La proprietà **ows\_Doc\_x0020\_Type** è la seconda proprietà di interesse in questo scenario.</span><span class="sxs-lookup"><span data-stu-id="a1795-211">The **ows\_Doc\_x0020\_Type** property is the second property that interests us.</span></span> <span data-ttu-id="a1795-212">Questa esegue il mapping alla proprietà **Tipo di documento** della tipologia di contenuto Documento di produzione.</span><span class="sxs-lookup"><span data-stu-id="a1795-212">It maps to the **Doc Type** property of the Production Document content type.</span></span>

> [!TIP]
> <span data-ttu-id="a1795-213">Per identificare il nome di una proprietà sottoposta a ricerca per indicizzazione per questo scenario, passare alla raccolta che contiene i documenti di produzione.</span><span class="sxs-lookup"><span data-stu-id="a1795-213">To identify the name of a crawled property for this scenario, go to the document library that contains the production documents.</span></span> <span data-ttu-id="a1795-214">Quindi accedere alle relative impostazioni.</span><span class="sxs-lookup"><span data-stu-id="a1795-214">Then go to the library settings.</span></span> <span data-ttu-id="a1795-215">Per **Colonne**, selezionare il nome della colonna, ad esempio, **Stato** o **Tipo di documento**, per aprire la pagina della colonna del sito.</span><span class="sxs-lookup"><span data-stu-id="a1795-215">For **Columns**, select the name of the column (for example, **Status** or **Doc Type**) to open the site column page.</span></span> <span data-ttu-id="a1795-216">Il parametro *Campo* nell'URL della pagina contiene il nome del campo.</span><span class="sxs-lookup"><span data-stu-id="a1795-216">The *Field* parameter in the URL for that page contains the name of the field.</span></span> <span data-ttu-id="a1795-217">Tale nome del campo, con prefisso "ows_", è il nome della proprietà sottoposta a ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-217">This field name, prefixed with "ows_", is the name of the crawled property.</span></span> <span data-ttu-id="a1795-218">Ad esempio, l'URL `https://tenantname.sharepoint.com/sites/SpinningWidget/_layouts/15/FldEdit.aspx?List=%7BC38C2F45-3BD6-4C3B-AA3B-EF5DF6B3D172%7D&Field=_Status` corrisponde alla proprietà sottoposta a ricerca per indicizzazione di *ows\_\_Status*.</span><span class="sxs-lookup"><span data-stu-id="a1795-218">For example, the URL `https://tenantname.sharepoint.com/sites/SpinningWidget/_layouts/15/FldEdit.aspx?List=%7BC38C2F45-3BD6-4C3B-AA3B-EF5DF6B3D172%7D&Field=_Status` corresponds to the *ows\_\_Status* crawled property.</span></span>

<span data-ttu-id="a1795-219">Se le proprietà sottoposte a ricerca per indicizzazione non sono visualizzate nella sezione Gestisci schema di ricerca all'interno dell'interfaccia di amministrazione di SharePoint:</span><span class="sxs-lookup"><span data-stu-id="a1795-219">If the crawled properties you're looking for don't appear in the Manage Search Schema section in SharePoint admin center:</span></span>

- <span data-ttu-id="a1795-220">Forse i documenti non sono stati indicizzati.</span><span class="sxs-lookup"><span data-stu-id="a1795-220">Maybe the documents haven't been indexed.</span></span> <span data-ttu-id="a1795-221">È possibile forzare una reindicizzazione della raccolta andando su **Impostazioni della raccolta documenti**  > **Impostazioni avanzate**.</span><span class="sxs-lookup"><span data-stu-id="a1795-221">You can force a reindex of the library by going to **Document library settings** > **Advanced Settings**.</span></span>

- <span data-ttu-id="a1795-222">Se la raccolta documenti si trova in un sito moderno, verificare che l'amministratore di SharePoint sia anche un amministratore della raccolta siti.</span><span class="sxs-lookup"><span data-stu-id="a1795-222">If the document library is in a modern site, make sure that the SharePoint admin is also a site collection admin.</span></span>

<span data-ttu-id="a1795-223">Per ulteriori informazioni sulle proprietà sottoposte a ricerca per indicizzazione e sulle proprietà gestite, vedere [Proprietà gestite create automaticamente in SharePoint Server](https://docs.microsoft.com/sharepoint/technical-reference/automatically-created-managed-properties-in-sharepoint).</span><span class="sxs-lookup"><span data-stu-id="a1795-223">For more information about crawled and managed properties, see [Automatically created managed properties in SharePoint Server](https://docs.microsoft.com/sharepoint/technical-reference/automatically-created-managed-properties-in-sharepoint).</span></span>

### <a name="map-crawled-properties-to-pre-defined-managed-properties"></a><span data-ttu-id="a1795-224">Mappare le proprietà sottoposte a ricerca per indicizzazione alle proprietà gestite predefinite</span><span class="sxs-lookup"><span data-stu-id="a1795-224">Map crawled properties to pre-defined managed properties</span></span>

<span data-ttu-id="a1795-225">KQL non può fare uso delle proprietà sottoposte a ricerca per indicizzazione nelle query di ricerca.</span><span class="sxs-lookup"><span data-stu-id="a1795-225">KQL can't use crawled properties in search queries.</span></span> <span data-ttu-id="a1795-226">A tal fine, deve utilizzare una proprietà gestita.</span><span class="sxs-lookup"><span data-stu-id="a1795-226">It has to use a managed property.</span></span> <span data-ttu-id="a1795-227">In un tipico scenario di ricerca, si crea dunque una proprietà gestita e la si mappa alla proprietà sottoposta a ricerca per indicizzazione di cui si ha bisogno.</span><span class="sxs-lookup"><span data-stu-id="a1795-227">In a typical search scenario, we create a managed property and map it to the crawled property that we need.</span></span> <span data-ttu-id="a1795-228">Tuttavia, per l'applicazione automatica delle etichette di conservazione, è possibile solo specificare le proprietà gestite predefinite in KQL e non quelle personalizzate.</span><span class="sxs-lookup"><span data-stu-id="a1795-228">However, for auto-applying retention labels, you can only specify pre-defined managed properties in KQL, not custom managed properties.</span></span> <span data-ttu-id="a1795-229">Nel sistema esiste un set di proprietà gestite predefinite per le stringhe da *RefinableString00* a *RefinableString199* che è possibile usare.</span><span class="sxs-lookup"><span data-stu-id="a1795-229">There's a set of predefined managed properties in the system for string *RefinableString00* to *RefinableString199* that you can use.</span></span> <span data-ttu-id="a1795-230">Per un elenco completo, vedere [Proprietà gestite non utilizzate predefinite](https://docs.microsoft.com/sharepoint/manage-search-schema#default-unused-managed-properties).</span><span class="sxs-lookup"><span data-stu-id="a1795-230">For a complete list, see [Default unused managed properties](https://docs.microsoft.com/sharepoint/manage-search-schema#default-unused-managed-properties).</span></span> <span data-ttu-id="a1795-231">Tali proprietà gestite predefinite vengono generalmente utilizzate per la definizione dei criteri di affinamento della ricerca.</span><span class="sxs-lookup"><span data-stu-id="a1795-231">These default managed properties are typically used for defining search refiners.</span></span>

<span data-ttu-id="a1795-232">Affinché la query KQL applichi automaticamente l'etichetta di conservazione corretta al contenuto del documento di prodotto, è necessario eseguire il mapping delle proprietà sottoposte a ricerca per indicizzazione **ows\_Doc\_x0020\_Type* e *ows\_\_Status** a due proprietà gestite per affinamento ricerca.</span><span class="sxs-lookup"><span data-stu-id="a1795-232">For the KQL query to automatically apply the correct retention label to product document content, we map the crawled properties **ows\_Doc\_x0020\_Type* and *ows\_\_Status** to two refinable managed properties.</span></span> <span data-ttu-id="a1795-233">Nell'ambiente di test per questo scenario, si evita l'uso di **RefinableString00** e **RefinableString01**.</span><span class="sxs-lookup"><span data-stu-id="a1795-233">In our test environment for this scenario, **RefinableString00** and **RefinableString01** aren't being used.</span></span> <span data-ttu-id="a1795-234">Questa condotta è stata determinata osservando le **Proprietà gestite** nella sezione **Gestisci schema di ricerca** all'interno dell'interfaccia di amministrazione di SharePoint.</span><span class="sxs-lookup"><span data-stu-id="a1795-234">We determined this by looking at **Managed Properties** in **Manage Search Schema** in the SharePoint admin center.</span></span>

<span data-ttu-id="a1795-235">[ ![Proprietà gestite nello schema di ricerca](../media/SPRetention12.png) ](../media/SPRetention12.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-235">[ ![Managed properties in search schema](../media/SPRetention12.png) ](../media/SPRetention12.png#lightbox)</span></span>

<span data-ttu-id="a1795-236">Notare che la colonna **Proprietà sottoposte a ricerca per indicizzazione** mostrata nella schermata precedente è vuota.</span><span class="sxs-lookup"><span data-stu-id="a1795-236">Notice that the **Mapped Crawled Properties** column in the previous screenshot is empty.</span></span>

<span data-ttu-id="a1795-237">Per eseguire il mapping della proprietà sottoposta a ricerca per indicizzazione **ows\_Doc\_x0020\_Type**, procedere come segue:</span><span class="sxs-lookup"><span data-stu-id="a1795-237">To map the **ows\_Doc\_x0020\_Type** crawled property, follow these steps:</span></span>

1. <span data-ttu-id="a1795-238">Nella casella del filtro **Proprietà gestita**, digitare ***RefinableString00*** e selezionare la freccia verde.</span><span class="sxs-lookup"><span data-stu-id="a1795-238">In the **Managed property** filter box, type ***RefinableString00*** and select the green arrow.</span></span>

2. <span data-ttu-id="a1795-239">Nell'elenco dei risultati, selezionare il link **RefinableString00**, poi scorrere verso il basso fino alla sezione **Mapping alle proprietà sottoposte a ricerca per indicizzazione**.</span><span class="sxs-lookup"><span data-stu-id="a1795-239">In the results list, select the **RefinableString00** link, and then scroll down to the **Mappings to crawled properties** section.</span></span>  

3. <span data-ttu-id="a1795-240">Selezionare **Aggiungi mapping** e poi digitare ***ows\_Doc\_x0020\_Type*** nella casella **Cerca un nome di proprietà sottoposta a ricerca per indicizzazione** all'interno della finestra **Selezione proprietà sottoposte a ricerca per indicizzazione**.</span><span class="sxs-lookup"><span data-stu-id="a1795-240">Select **Add a Mapping**, and then type ***ows\_Doc\_x0020\_Type*** in the **Search for a crawled property name** box in the **Crawled property selection** window.</span></span> <span data-ttu-id="a1795-241">Selezionare **Trova**.</span><span class="sxs-lookup"><span data-stu-id="a1795-241">Select **Find**.</span></span>  

4. <span data-ttu-id="a1795-242">Nell'elenco dei risultati, selezionare **ows\_Doc\_x0020\_Type** e poi **OK**.</span><span class="sxs-lookup"><span data-stu-id="a1795-242">In the results list, select **ows\_Doc\_x0020\_Type** and then select **OK**.</span></span>

   <span data-ttu-id="a1795-243">Nella sezione **Proprietà sottoposte a ricerca per indicizzazione**, si dovrebbe visualizzare qualcosa di simile a quanto mostrato in questa schermata:</span><span class="sxs-lookup"><span data-stu-id="a1795-243">In the **Mapped Crawled Properties** section, you should see something similar to this screenshot:</span></span>

   <span data-ttu-id="a1795-244">[ ![Selezionare Aggiungi mapping nella sezione Proprietà sottoposte a ricerca per indicizzazione](../media/SPRetention13.png) ](../media/SPRetention13.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-244">[ ![Select Add a mapping in the Mapped crawled properties section](../media/SPRetention13.png) ](../media/SPRetention13.png#lightbox)</span></span>


5. <span data-ttu-id="a1795-245">Per salvare il mapping, scorrere fino alla parte inferiore della pagina e selezionare **OK**.</span><span class="sxs-lookup"><span data-stu-id="a1795-245">Scroll to the bottom of the page and select **OK** to save the mapping.</span></span>

<span data-ttu-id="a1795-246">Ripetere questi passaggi per eseguire il mapping di **RefinableString01** e **ows\_\_Status**.</span><span class="sxs-lookup"><span data-stu-id="a1795-246">Repeat these steps to map **RefinableString01** and **ows\_\_Status**.</span></span>

<span data-ttu-id="a1795-247">A questo punto, si dovrebbe avere il mapping delle due proprietà gestite alle due proprietà sottoposte a ricerca per indicizzazione:</span><span class="sxs-lookup"><span data-stu-id="a1795-247">Now you should have two managed properties mapped to the two crawled properties:</span></span>

<span data-ttu-id="a1795-248">[ ![Proprietà gestite visualizzate come mappate alle proprietà sottoposte a ricerca per indicizzazione](../media/SPRetention14.png) ](../media/SPRetention14.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-248">[ ![Managed properties shown mapped to crawled properties](../media/SPRetention14.png) ](../media/SPRetention14.png#lightbox)</span></span>

<span data-ttu-id="a1795-249">Verificare che sia tutto configurato correttamente eseguendo una Ricerca contenuti organizzazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-249">Let's verify that our setup is correct by running an enterprise search.</span></span> <span data-ttu-id="a1795-250">Aprire un browser e andare su *https://\<your_tenant>sharepoint.com/search*.</span><span class="sxs-lookup"><span data-stu-id="a1795-250">In a browser, go to *https://\<your_tenant>.sharepoint.com/search*.</span></span> <span data-ttu-id="a1795-251">Nella casella di ricerca, digitare ***RefinableString00:"Specifica di prodotto"*** e premere Invio.</span><span class="sxs-lookup"><span data-stu-id="a1795-251">In the search box, type ***RefinableString00:"Product Specification"*** and press enter.</span></span> <span data-ttu-id="a1795-252">Questa ricerca dovrebbero mostrare tutti i documenti che contengono tale **Specifica di prodotto** come ***Tipo di documento***.</span><span class="sxs-lookup"><span data-stu-id="a1795-252">This search should return all documents that have a **Product Specification** of ***Doc Type***.</span></span>

<span data-ttu-id="a1795-253">A questo punto, digitare **RefinableString00:"Specifica di prodotto" AND RefinableString01:Final** nella casella di ricerca, quindi premere Invio.</span><span class="sxs-lookup"><span data-stu-id="a1795-253">Now in the search box, type **RefinableString00:"Product Specification" AND RefinableString01:Final** and press enter.</span></span> <span data-ttu-id="a1795-254">In questo modo, dovrebbero essere mostrati tutti i documenti che contengono tale **Specifica di prodotto** come ***Tipo di documento*** e che hanno ***Finale*** come **Stato**.</span><span class="sxs-lookup"><span data-stu-id="a1795-254">This should return all documents that have **Product Specification** of ***Doc Type*** and a **Status** of ***Final***.</span></span>

### <a name="create-auto-apply-label-policies"></a><span data-ttu-id="a1795-255">Creare i criteri per applicare automaticamente le etichette</span><span class="sxs-lookup"><span data-stu-id="a1795-255">Create auto-apply label policies</span></span>

<span data-ttu-id="a1795-256">Dopo aver verificato il funzionamento della query KQL, si potranno creare i criteri di applicazione automatica delle etichette che fanno uso di una query KQL per l'applicazione automatica dell'etichetta di conservazione della Specifica di prodotto ai documenti appropriati.</span><span class="sxs-lookup"><span data-stu-id="a1795-256">Now that we've verified that the KQL query is working, let's create an auto-apply label policy that uses a KQL query to automatically apply the Product Specification retention label to the appropriate documents.</span></span>

1. <span data-ttu-id="a1795-257">Nel [Centro conformità](https://compliance.microsoft.com/homepage) passare a **Gestione dei record** > **Criteri etichetta** > **Applica automaticamente un'etichetta**.</span><span class="sxs-lookup"><span data-stu-id="a1795-257">In the [compliance center](https://compliance.microsoft.com/homepage), go to **Records management** > **Label policies** > **Auto-apply a label**.</span></span>

   <span data-ttu-id="a1795-258">[ ![Selezionare "Applica automaticamente un'etichetta" nella pagina Etichette](../media/SPRetention16.png) ](../media/SPRetention16.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-258">[ ![Select "Auto-apply a label" on the Labels page](../media/SPRetention16.png) ](../media/SPRetention16.png#lightbox)</span></span>

2. <span data-ttu-id="a1795-259">Nella procedura guidata Crea criterio di applicazione automatica etichette, nella pagina **Nomina il tuo criterio di applicazione automatica etichette**, scrivere un nome, ad esempio **Applicazione automatica etichetta specifica di prodotto**, e aggiungere una descrizione facoltativa.</span><span class="sxs-lookup"><span data-stu-id="a1795-259">In the Create auto-labeling policy wizard, on the **Name your auto-labeling policy** page, enter a name such as **Auto-apply Product Specification label**, and an optional description.</span></span> <span data-ttu-id="a1795-260">Quindi, scegliere **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="a1795-260">Then select **Next**.</span></span>

3. <span data-ttu-id="a1795-261">Nella pagina **Scegli il tipo di contenuto a cui applicare questa etichetta**, selezionare **Applica etichetta a contenuti che includono parole, frasi o proprietà specifiche**, quindi selezionare **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="a1795-261">On the **Choose the type of content you want to apply this label to** page, select **Apply label to content that contains specific words or phrases, or properties**, and then select **Next**.</span></span>
    
   <span data-ttu-id="a1795-262">[ ![Selezionare Applica etichetta ai contenuti che includono parole, frasi o proprietà specifiche](../media/SPRetention17.png) ](../media/SPRetention17.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-262">[ ![Select Apply label to content that contains specific words or phrases, or properties](../media/SPRetention17.png) ](../media/SPRetention17.png#lightbox)</span></span>
    
   <span data-ttu-id="a1795-263">Questa opzione consente di fornire la stessa query di ricerca KQL collaudata nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="a1795-263">This option lets us provide the same KQL search query that we tested in the previous section.</span></span> <span data-ttu-id="a1795-264">La query mostra come risultato tutti i documenti Specifica di prodotto che hanno *Finale* come Stato.</span><span class="sxs-lookup"><span data-stu-id="a1795-264">The query returns all Product Specification documents that have a status of *Final*.</span></span> <span data-ttu-id="a1795-265">Quando utilizziamo la medesima query nei criteri di applicazione automatica dell'etichetta, l'etichetta di conservazione Specifica di prodotto sarà applicata automaticamente a tutti i documenti corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="a1795-265">When we use this same query in the auto-apply label policy, the Product Specification retention label will be automatically applied to all documents that match it.</span></span>

4. <span data-ttu-id="a1795-266">Nella pagina **Applica etichetta a contenuti che corrispondono a questa query**, scrivere **RefinableString00:"Product Specification" AND RefinableString01:Final** e selezionare **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="a1795-266">On the **Apply label to content matching this query** page, type **RefinableString00:"Product Specification" AND RefinableString01:Final**, and then select **Next**.</span></span>

   ![Specificare la query nella casella Editor di query con parole chiave](../media/SPRetention19.png)

5. <span data-ttu-id="a1795-268">Nella pagina **Scegli posizioni per applicare il criterio**, selezionare le posizioni dei contenuti a cui si desidera applicare il criterio.</span><span class="sxs-lookup"><span data-stu-id="a1795-268">On the **Choose locations to apply the policy** page, you select the content locations that you want to apply the policy to.</span></span> <span data-ttu-id="a1795-269">Per questo scenario, il criterio verrà applicato solo alle posizioni di SharePoint, poiché tutti i documenti di produzione sono archiviati nelle raccolte documenti di SharePoint.</span><span class="sxs-lookup"><span data-stu-id="a1795-269">For this scenario, we apply the policy only to SharePoint locations, because all the production documents are stored in SharePoint document libraries.</span></span> <span data-ttu-id="a1795-270">Modificare lo stato di **Posta elettronica di Exchange**, **Account di OneDrive**, e **Gruppi di Office 365** su **Disattivato**.</span><span class="sxs-lookup"><span data-stu-id="a1795-270">Toggle the status for **Exchange email**, **OneDrive accounts**, and **Office 365 Groups** to **Off**.</span></span> <span data-ttu-id="a1795-271">Verificare che lo stato dei siti di SharePoint sia impostato su **Attivato** prima di selezionare **Avanti**:</span><span class="sxs-lookup"><span data-stu-id="a1795-271">Make sure that the status for SharePoint sites is set to **On** before you select **Next**:</span></span> 
    
    ![Scegliere siti specifici per l'applicazione automatica delle etichette](../media/SPRetentionSPlocations.png)
    
   > [!TIP]
   > <span data-ttu-id="a1795-273">Anziché applicare il criterio a tutti i siti di SharePoint, è possibile selezionare **Seleziona sito** e aggiungere gli URL per i siti di SharePoint specifici.</span><span class="sxs-lookup"><span data-stu-id="a1795-273">Instead of applying the policy to all SharePoint sites, you can select **Choose site** and add the URLs for specific SharePoint sites.</span></span>

6. <span data-ttu-id="a1795-274">Nella pagina **Scegli un'etichettare da applicare automaticamente**, selezionare **Aggiungi etichetta**.</span><span class="sxs-lookup"><span data-stu-id="a1795-274">On the **Choose a label to auto-apply** page, select **Add label**.</span></span>

7. <span data-ttu-id="a1795-275">Nell'elenco di etichette di conservazione, selezionare **Specifica di prodotto**.</span><span class="sxs-lookup"><span data-stu-id="a1795-275">From the list of retention labels, select **Product Specification**.</span></span> <span data-ttu-id="a1795-276">Selezionare **Aggiungi** e **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="a1795-276">Then select **Add** and **Next**.</span></span>

8. <span data-ttu-id="a1795-277">Rivedere le impostazioni:</span><span class="sxs-lookup"><span data-stu-id="a1795-277">Review your settings:</span></span>

    ![Impostazioni per l'applicazione automatica dell'etichetta](../media/SPRetention18.png)

9. <span data-ttu-id="a1795-279">Selezionare **Invia** per creare il criterio di applicazione automatica dell'etichetta.</span><span class="sxs-lookup"><span data-stu-id="a1795-279">Select **Submit** to create the auto-apply label policy.</span></span>
    
   >[!NOTE]
   ><span data-ttu-id="a1795-280">Sono necessari fino a 7 giorni per applicare automaticamente l'etichetta Specifica di prodotto a tutti i documenti che corrispondono alla query di ricerca KQL.</span><span class="sxs-lookup"><span data-stu-id="a1795-280">It takes up to 7 days to automatically apply the Product Specification label to all documents that match the KQL search query.</span></span>

### <a name="verify-that-the-retention-label-was-automatically-applied"></a><span data-ttu-id="a1795-281">Verificare che l'etichetta di conservazione sia stata applicata automaticamente</span><span class="sxs-lookup"><span data-stu-id="a1795-281">Verify that the retention label was automatically applied</span></span>

<span data-ttu-id="a1795-282">Dopo 7 giorni, usare [Esplora attività](data-classification-activity-explorer.md) nel Centro conformità per verificare che il criterio di applicazione automatica dell'etichetta creato abbia applicato automaticamente le etichette di conservazione ai documenti di prodotto.</span><span class="sxs-lookup"><span data-stu-id="a1795-282">After 7 days, use [activity explorer](data-classification-activity-explorer.md) in the compliance center to verify that the auto-apply label policy that we created did automatically apply the retention labels to the product documents.</span></span>

<span data-ttu-id="a1795-283">Verificare anche le proprietà dei documenti all'interno della Raccolta documenti.</span><span class="sxs-lookup"><span data-stu-id="a1795-283">Also look at the properties of the documents in the Document Library.</span></span> <span data-ttu-id="a1795-284">Nel riquadro delle informazioni, si può notare che l'etichetta di conservazione è applicata a un documento selezionato.</span><span class="sxs-lookup"><span data-stu-id="a1795-284">In the information panel, you can see that the retention label is applied to a selected document.</span></span>

<span data-ttu-id="a1795-285">[ ![Verificare che l'etichetta sia stata applicata osservando le proprietà del documento nella Raccolta documenti](../media/SPRetention21.png) ](../media/SPRetention21.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-285">[ ![Verify that label was applied by looking at the document properties in the Document Library](../media/SPRetention21.png) ](../media/SPRetention21.png#lightbox)</span></span>

<span data-ttu-id="a1795-286">Siccome le etichette di conservazione erano state applicate automaticamente ai documenti, tali documenti risultano protetti dall’eliminazione poiché l'etichetta di conservazione è stata configurata in modo che i documenti venissero dichiarati come *record*.</span><span class="sxs-lookup"><span data-stu-id="a1795-286">Because the retention labels were auto-applied to documents, those documents are protected from deletion because the retention label was configured to declare the documents as *records*.</span></span> <span data-ttu-id="a1795-287">Come esempio di questa protezione, viene mostrato il seguente messaggio di errore quando si tenta di eliminare uno di questi documenti:</span><span class="sxs-lookup"><span data-stu-id="a1795-287">As an example of this protection, we get the following error message when we try to delete one of these documents:</span></span>

<span data-ttu-id="a1795-288">[ ![Un messaggio di errore indica che non è possibile eliminare i documenti perché l'etichetta dichiara che costituiscono dei record.](../media/SPRetention22.png) ](../media/SPRetention22.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-288">[ ![An error message shows that documents can't be deleted because the label declares that the documents are records.](../media/SPRetention22.png) ](../media/SPRetention22.png#lightbox)</span></span>

## <a name="generate-the-event-that-triggers-the-retention-period"></a><span data-ttu-id="a1795-289">Generare l'evento che attiva il periodo di conservazione</span><span class="sxs-lookup"><span data-stu-id="a1795-289">Generate the event that triggers the retention period</span></span>

<span data-ttu-id="a1795-290">Ora che le etichette di conservazione sono state applicate, il focus passa all'evento che indicherà la fine della produzione di un particolare prodotto.</span><span class="sxs-lookup"><span data-stu-id="a1795-290">Now that the retention labels are applied, let's focus on the event that will indicate the end of production for a particular product.</span></span> <span data-ttu-id="a1795-291">Questo evento attiva l'inizio del periodo di conservazione definito nelle etichette di conservazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-291">This event triggers the beginning of the retention period that's defined in the retention labels.</span></span> <span data-ttu-id="a1795-292">Ad esempio, per i documenti delle specifiche di prodotto, il periodo di conservazione quinquennale inizia quando viene attivato l'evento "Fine della produzione".</span><span class="sxs-lookup"><span data-stu-id="a1795-292">For example, for product specification documents, the 5-year retention period begins when the "end of production" event is triggered.</span></span>

<span data-ttu-id="a1795-293">È possibile creare manualmente l'evento nel Centro conformità Microsoft 365 passando a **Gestione dei record** > **Eventi**.</span><span class="sxs-lookup"><span data-stu-id="a1795-293">You can manually create the event in the Microsoft 365 compliance center by going to **Records Managements** > **Events**.</span></span> <span data-ttu-id="a1795-294">Scegliere il tipo di evento, impostare gli ID risorsa corretti e immettere una data per l'evento.</span><span class="sxs-lookup"><span data-stu-id="a1795-294">You would choose the event type, set the correct asset IDs, and enter a date for the event.</span></span> <span data-ttu-id="a1795-295">Per ulteriori informazioni, vedere [Avviare la conservazione al verificarsi di un evento](event-driven-retention.md).</span><span class="sxs-lookup"><span data-stu-id="a1795-295">For more information, see [Start retention when an event occurs](event-driven-retention.md).</span></span>

<span data-ttu-id="a1795-296">Ma per questo scenario l'evento verrà generato automaticamente da un sistema di produzione esterno.</span><span class="sxs-lookup"><span data-stu-id="a1795-296">But for this scenario, we'll automatically generate the event from an external production system.</span></span> <span data-ttu-id="a1795-297">Il sistema è un semplice elenco di SharePoint che indica se un prodotto è in produzione.</span><span class="sxs-lookup"><span data-stu-id="a1795-297">The system is a simple SharePoint list that indicates whether a product is in production.</span></span> <span data-ttu-id="a1795-298">L’evento sarà attivato da un flusso [Power Automate](https://docs.microsoft.com/flow/getting-started) che è associato all'elenco.</span><span class="sxs-lookup"><span data-stu-id="a1795-298">A [Power Automate](https://docs.microsoft.com/flow/getting-started) flow that's associated with the list will trigger the event.</span></span> <span data-ttu-id="a1795-299">In uno scenario reale, è possibile utilizzare vari sistemi per generare l'evento, ad esempio un sistema HR o CRM.</span><span class="sxs-lookup"><span data-stu-id="a1795-299">In a real-world scenario, you could use various systems to generate the event, such as an HR or CRM system.</span></span> <span data-ttu-id="a1795-300">Power Automate include numerose interazioni pronte all'uso e blocchi predefiniti per i carichi di lavoro di Microsoft 365, ad esempio Microsoft Exchange, SharePoint, Teams e Dynamics 365, oltre ad app di terze parti, come Twitter, Box, Salesforce e Workdays.</span><span class="sxs-lookup"><span data-stu-id="a1795-300">Power Automate contains many ready-to-use interactions and building block for Microsoft 365 workloads, such as Microsoft Exchange, SharePoint, Teams, and Dynamics 365, plus third-party apps such as Twitter, Box, Salesforce, and Workdays.</span></span> <span data-ttu-id="a1795-301">Questa caratteristica consente di integrare facilmente Power Automate all’interno di vari sistemi.</span><span class="sxs-lookup"><span data-stu-id="a1795-301">This feature makes it easy to integrate Power Automate with various systems.</span></span> <span data-ttu-id="a1795-302">Per ulteriori informazioni, vedere [Automatizzare la conservazione basata su eventi](automate-event-driven-retention.md).</span><span class="sxs-lookup"><span data-stu-id="a1795-302">For more information, see [Automate event-driven retention](automate-event-driven-retention.md).</span></span>

<span data-ttu-id="a1795-303">La schermata seguente mostra l'elenco di SharePoint che verrà utilizzato per attivare l'evento:</span><span class="sxs-lookup"><span data-stu-id="a1795-303">The following screenshot shows the SharePoint list that will be used the trigger the event:</span></span>

<span data-ttu-id="a1795-304">[ ![L'elenco che attiverà l'evento di conservazione](../media/SPRetention23.png) ](../media/SPRetention23.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-304">[ ![The list that will trigger the retention event](../media/SPRetention23.png) ](../media/SPRetention23.png#lightbox)</span></span>

<span data-ttu-id="a1795-305">Attualmente, vi sono due prodotti in produzione come indicato dal valore ***Sì*** nella colonna **In produzione**.</span><span class="sxs-lookup"><span data-stu-id="a1795-305">There are two products currently in production, as indicated by the ***Yes*** in the **In Production** column.</span></span> <span data-ttu-id="a1795-306">Se in questa colonna il valore corrispondente a un prodotto è impostato su ***No***, il flusso associato all'elenco genererà automaticamente l'evento.</span><span class="sxs-lookup"><span data-stu-id="a1795-306">When the value in this column is set to ***No*** for a product, the flow associated with the list will automatically generate the event.</span></span> <span data-ttu-id="a1795-307">L’evento attiva l'inizio del periodo di conservazione per l'etichetta di conservazione che era stata applicata automaticamente ai documenti di prodotto corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="a1795-307">The event triggers the start of the retention period for the retention label that was auto-applied to the corresponding product documents.</span></span>

<span data-ttu-id="a1795-308">Per questo scenario, si utilizza il seguente flusso per attivare l'evento:</span><span class="sxs-lookup"><span data-stu-id="a1795-308">For this scenario, we use the following flow to trigger the event:</span></span>

<span data-ttu-id="a1795-309">[ ![Configurazione del flusso che attiverà l'evento](../media/SPRetention24.png) ](../media/SPRetention24.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-309">[ ![Configuring the flow that will trigger the event](../media/SPRetention24.png) ](../media/SPRetention24.png#lightbox)</span></span>

<span data-ttu-id="a1795-310">Per creare questo flusso, iniziare da un connettore di SharePoint e selezionare il trigger **Quando viene creato o modificato un elemento**.</span><span class="sxs-lookup"><span data-stu-id="a1795-310">To create this flow, start from a SharePoint connector and select the **When an item is created or modified** trigger.</span></span> <span data-ttu-id="a1795-311">Specificare l'indirizzo del sito e il nome dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="a1795-311">Specify the site address and list name.</span></span> <span data-ttu-id="a1795-312">Quindi aggiungere una condizione associata al valore ***No*** della colonna **In produzione** (o al valore *Falso* nella scheda condizione).</span><span class="sxs-lookup"><span data-stu-id="a1795-312">Then add a condition based on when the **In Production** list column value is set to ***No*** (or equal to *false* on the condition card).</span></span> <span data-ttu-id="a1795-313">A questo punto, aggiungere un'azione basata sul modello HTTP predefinito.</span><span class="sxs-lookup"><span data-stu-id="a1795-313">Then add an action based on the built-in HTTP template.</span></span> <span data-ttu-id="a1795-314">Per configurare l'azione HTTP, usare i valori della sezione seguente.</span><span class="sxs-lookup"><span data-stu-id="a1795-314">Use the values in the following section to configure the HTTP action.</span></span> <span data-ttu-id="a1795-315">È possibile copiare i valori delle proprietà **URI** e **Corpo** dalla sezione seguente e incollarli nel modello.</span><span class="sxs-lookup"><span data-stu-id="a1795-315">You can copy the values for the **URI** and **Body** properties from the following section and paste them into the template.</span></span>

- <span data-ttu-id="a1795-316">**Metodo**: POST</span><span class="sxs-lookup"><span data-stu-id="a1795-316">**Method**: POST</span></span>
- <span data-ttu-id="a1795-317">**URI**: `https://ps.compliance.protection.outlook.com/psws/service.svc/ComplianceRetentionEvent`</span><span class="sxs-lookup"><span data-stu-id="a1795-317">**URI**: `https://ps.compliance.protection.outlook.com/psws/service.svc/ComplianceRetentionEvent`</span></span>
- <span data-ttu-id="a1795-318">**Intestazioni**: Chiave = Content-Type, Valore = application/atom+xml</span><span class="sxs-lookup"><span data-stu-id="a1795-318">**Headers**: Key = Content-Type, Value = application/atom+xml</span></span>
- <span data-ttu-id="a1795-319">**Corpo**:</span><span class="sxs-lookup"><span data-stu-id="a1795-319">**Body**:</span></span>
    
    ```xml
    <?xml version='1.0' encoding='utf-8' standalone='yes'>
    <entry xmlns:d='http://schemas.microsoft.com/ado/2007/08/dataservices' xmlns:m='http://schemas.microsoft.com/ado/2007/08/dataservices/metadata' xmlns='https://www.w3.org/2005/Atom'>
    <category scheme='http://schemas.microsoft.com/ado/2007/08/dataservices/scheme' term='Exchange.ComplianceRetentionEvent'>
    <updated>9/9/2017 10:50:00 PM</updated>
    <content type='application/xml'>
    <m:properties>
    <d:Name>Cessation Production @{triggerBody()?['Product_x0020_Name']?['Value']}</d:Name>
    <d:EventType>Product Cessation&lt;</d:EventType>
    <d:SharePointAssetIdQuery>ProductName:&quot;@{triggerBody()?['Product_x0020_Name']?['Value']}<d:SharePointAssetIdQuery>
    <d:EventDateTime>@{formatDateTime(utcNow(),'yyyy-MM-dd')}</d:EventDateTime>
    </m:properties>
    </content&gt>
    </entry>
    ```

<span data-ttu-id="a1795-320">L’elenco descrive i parametri della proprietà **Corpo** relativi all'azione da configurarsi per questo scenario:</span><span class="sxs-lookup"><span data-stu-id="a1795-320">This list describes the parameters in the **Body** property of the action that must be configured for this scenario:</span></span>

- <span data-ttu-id="a1795-321">**Name**: questo parametro specifica il nome dell'evento che verrà creato all'interno del Centro conformità Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a1795-321">**Name**: This parameter specifies the name of the event that will be created in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="a1795-322">Per questo scenario, il nome è "Cessazione produzione *xxx*", dove *xxx* è il valore della proprietà gestita **ProductName** precedentemente creata.</span><span class="sxs-lookup"><span data-stu-id="a1795-322">For this scenario, the name is "Cessation Production *xxx*", where *xxx* is the value of the **ProductName** managed property that we created earlier.</span></span>
- <span data-ttu-id="a1795-323">**EventType**: il valore di questo parametro corrisponde al tipo di evento a cui si applicherà l'evento creato.</span><span class="sxs-lookup"><span data-stu-id="a1795-323">**EventType**: The value for this parameter corresponds to the event type that the created event will apply to.</span></span> <span data-ttu-id="a1795-324">Questo tipo di evento è stato definito al momento della creazione dell'etichetta di conservazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-324">This event type was defined when you created the retention label.</span></span> <span data-ttu-id="a1795-325">Per questo scenario, il tipo di evento è "Cessazione del prodotto".</span><span class="sxs-lookup"><span data-stu-id="a1795-325">For this scenario, the event type is "Product Cessation."</span></span>
- <span data-ttu-id="a1795-326">**SharePointAssetIdQuery**: questo parametro definisce l'ID risorsa per l'evento.</span><span class="sxs-lookup"><span data-stu-id="a1795-326">**SharePointAssetIdQuery**: This parameter defines the asset ID for the event.</span></span> <span data-ttu-id="a1795-327">La conservazione basata su eventi richiede che ogni documento abbia un identificatore univoco.</span><span class="sxs-lookup"><span data-stu-id="a1795-327">Event-based retention needs a unique identifier for the document.</span></span> <span data-ttu-id="a1795-328">È possibile usare gli ID risorsa per identificare i documenti a cui si applica un particolare evento oppure, come nel caso di questo scenario, una colonna di metadati, il **Nome del prodotto**.</span><span class="sxs-lookup"><span data-stu-id="a1795-328">We can use asset IDs to identify the documents that a particular event applies to or, as in this scenario, the metadata column **Product Name**.</span></span> <span data-ttu-id="a1795-329">A tale scopo, è necessario creare una nuova proprietà gestita **ProductName** che può essere usata nella query KQL.</span><span class="sxs-lookup"><span data-stu-id="a1795-329">To do  this, we need to create a new **ProductName** managed property that can be used in the KQL query.</span></span> <span data-ttu-id="a1795-330">(In alternativa, è possibile usare **RefinableString00** anziché creare una nuova proprietà gestita).</span><span class="sxs-lookup"><span data-stu-id="a1795-330">(Alternatively, we could use **RefinableString00** instead of creating a new managed property).</span></span> <span data-ttu-id="a1795-331">È necessario anche eseguire il mapping di questa nuova proprietà gestita alla proprietà sottoposta a ricerca per indicizzazione **ows_Product_x0020_Name**.</span><span class="sxs-lookup"><span data-stu-id="a1795-331">We also need to map this new managed property to the **ows_Product_x0020_Name** crawled property.</span></span> <span data-ttu-id="a1795-332">Ecco una schermata di tale proprietà gestita.</span><span class="sxs-lookup"><span data-stu-id="a1795-332">Here's a screenshot of this managed property.</span></span>

    <span data-ttu-id="a1795-333">[ ![Proprietà gestita di conservazione](../media/SPRetention25.png) ](../media/SPRetention25.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-333">[ ![Rentention managed property](../media/SPRetention25.png) ](../media/SPRetention25.png#lightbox)</span></span>

- <span data-ttu-id="a1795-334">**EventDateTime**: questo parametro definisce la data in cui si verifica l'evento.</span><span class="sxs-lookup"><span data-stu-id="a1795-334">**EventDateTime**: This parameter defines the date that the event occurs.</span></span> <span data-ttu-id="a1795-335">Utilizzare il formato data corrente:</span><span class="sxs-lookup"><span data-stu-id="a1795-335">Use the current date format:</span></span><br/><br/><span data-ttu-id="a1795-336">*formatDateTime(utcNow(),'yyyy-MM-dd'*)</span><span class="sxs-lookup"><span data-stu-id="a1795-336">*formatDateTime(utcNow(),'yyyy-MM-dd'*)</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="a1795-337">Riassumendo</span><span class="sxs-lookup"><span data-stu-id="a1795-337">Putting it all together</span></span>

<span data-ttu-id="a1795-338">Adesso è stata creata e applicata automaticamente l'etichetta di conservazione e il flusso è stato configurato e creato.</span><span class="sxs-lookup"><span data-stu-id="a1795-338">Now the retention label is created and auto-applied, and the flow is configured and created.</span></span> <span data-ttu-id="a1795-339">Se il valore nella colonna **In produzione** per il prodotto Spinning Widget nell’elenco Prodotti viene modificato da ***Sì*** a ***No***, il flusso viene attivato per generare l’evento.</span><span class="sxs-lookup"><span data-stu-id="a1795-339">When the value in the **In Production** column for the Spinning Widget product in the Products list is changed from ***Yes*** to ***No***, the flow is triggered to create the event.</span></span> <span data-ttu-id="a1795-340">Per vedere tale evento nel Centro conformità, passare a **Gestione record** > **Eventi**.</span><span class="sxs-lookup"><span data-stu-id="a1795-340">To see this event in the compliance center, go to **Records management** > **Events**.</span></span>

<span data-ttu-id="a1795-341">[ ![L'evento che è stato attivato dal flusso viene visualizzato nella pagina Eventi nel Centro conformità.](../media/SPRetention28.png) ](../media/SPRetention28.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-341">[ ![The event that was triggered by the flow is displayed on the Events page in the compliance center.](../media/SPRetention28.png) ](../media/SPRetention28.png#lightbox)</span></span>

<span data-ttu-id="a1795-342">Selezionare l'evento per visualizzarne i dettagli nella pagina a comparsa.</span><span class="sxs-lookup"><span data-stu-id="a1795-342">Select the event to view the details on the flyout page.</span></span> <span data-ttu-id="a1795-343">Notare che anche se l'evento è stato creato, il relativo stato indica che non è stato elaborato alcun sito o documento di SharePoint.</span><span class="sxs-lookup"><span data-stu-id="a1795-343">Notice that even though the event is created, the event status shows that no SharePoint sites or documents have been processed.</span></span>

![Dettagli evento](../media/SPRetention29.png)

<span data-ttu-id="a1795-345">Dopo un periodo di tempo, lo stato dell’evento indica l'elaborazione di un sito e di un documento di SharePoint.</span><span class="sxs-lookup"><span data-stu-id="a1795-345">But after a delay, the event status shows that a SharePoint site and a SharePoint document have been processed.</span></span>  

![I dettagli dell'evento mostrano che i documenti sono stati elaborati.](../media/SPRetention31.png)
 
<span data-ttu-id="a1795-347">Questo indica che sarà stato avviato il periodo di conservazione per l'etichetta applicata al documento del prodotto Spinning Widget, sulla base della data dell'evento *Cessazione produzione Spinning Widget*.</span><span class="sxs-lookup"><span data-stu-id="a1795-347">This shows that the retention period for the label applied to the Spinning Widget product document has been initiated, based on the event date of the *Cessation Production Spinning Widget* event.</span></span> <span data-ttu-id="a1795-348">Ipotizzando che lo scenario sia stato implementato nell'ambiente di test configurando un periodo di conservazione pari a un giorno, è possibile passare alla raccolta dei propri documenti di prodotto alcuni giorni dopo la creazione dell'evento e verificare l'effettiva eliminazione di tale documento, in seguito al processo di eliminazione in SharePoint.</span><span class="sxs-lookup"><span data-stu-id="a1795-348">Assuming that you implemented the scenario in your test environment by configuring a one-day retention period, you can go to the document library for your product documents a few days after the event was created and verify that the document was deleted (after the deletion job in SharePoint has run).</span></span>

### <a name="more-about-asset-ids"></a><span data-ttu-id="a1795-349">Altre informazioni sugli ID risorsa</span><span class="sxs-lookup"><span data-stu-id="a1795-349">More about asset IDs</span></span>

<span data-ttu-id="a1795-350">Come descritto nell’articolo [Avviare la conservazione al verificarsi di un evento](event-driven-retention.md), è importante comprendere la relazione tra le tipologie di evento, le etichette di conservazione, gli eventi e gli ID risorsa.</span><span class="sxs-lookup"><span data-stu-id="a1795-350">As the [Start retention when an event occurs](event-driven-retention.md) article explains, it's important to understand the relationship between event types, retention labels, events, and asset IDs.</span></span> <span data-ttu-id="a1795-351">L'ID risorsa è semplicemente una proprietà di un documento in SharePoint e OneDrive.</span><span class="sxs-lookup"><span data-stu-id="a1795-351">The asset ID is simply a document property in SharePoint and OneDrive.</span></span> <span data-ttu-id="a1795-352">Consente di identificare quei documenti per cui l'evento darà avvio al periodo di conservazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-352">It helps you identify the documents whose retention period will be triggered by the event.</span></span> <span data-ttu-id="a1795-353">Come impostazione predefinita, SharePoint dispone di una proprietà **ID risorsa** utilizzabile per la conservazione basata su eventi:</span><span class="sxs-lookup"><span data-stu-id="a1795-353">By default, SharePoint has an **Asset Id** property that you can use for event-driven retention:</span></span>

![La proprietà ID risorsa visualizzata su una pagina dei dettagli delle proprietà del documento.](../media/SPRetention26.png)

<span data-ttu-id="a1795-355">Come mostra la schermata seguente, la proprietà gestita ID risorsa è denominata **ComplianceAssetId**.</span><span class="sxs-lookup"><span data-stu-id="a1795-355">As the following screenshot shows, the asset ID managed property is called **ComplianceAssetId**.</span></span>

<span data-ttu-id="a1795-356">[ ![Proprietà gestita ComplianceAssetId](../media/SPRetention27.png) ](../media/SPRetention27.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="a1795-356">[ ![ComplianceAssetId managed property](../media/SPRetention27.png) ](../media/SPRetention27.png#lightbox)</span></span>

<span data-ttu-id="a1795-357">Invece di usare la proprietà **ID risorsa predefinita** come mostrato in questo scenario, è possibile utilizzare qualsiasi altra proprietà.</span><span class="sxs-lookup"><span data-stu-id="a1795-357">Instead of using the default **Asset Id** property as we do in this scenario, you can use any other property.</span></span> <span data-ttu-id="a1795-358">Tuttavia, è importante tenere presente che se per un evento non si specificano le parole chiave o un ID risorsa, l'evento attiverà il periodo di conservazione per tutto il contenuto avente un'etichetta corrispondente a quel tipo di evento.</span><span class="sxs-lookup"><span data-stu-id="a1795-358">But it's important to understand that if you don't specify an asset ID or keywords for an event, all the content that has a label of that event type will get its retention period triggered by the event.</span></span>

### <a name="using-advanced-search-in-sharepoint"></a><span data-ttu-id="a1795-359">Usare la ricerca avanzata in SharePoint</span><span class="sxs-lookup"><span data-stu-id="a1795-359">Using advanced search in SharePoint</span></span>

<span data-ttu-id="a1795-360">Nella schermata precedente, si può vedere anche che esiste un'altra proprietà gestita relativa alle etichette di conservazione denominata **ComplianceTag** che è mappata a una proprietà sottoposta a ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-360">In the previous screenshot, you can see that there's another managed property related to retention labels called **ComplianceTag** that's mapped to a crawled property.</span></span> <span data-ttu-id="a1795-361">Anche la proprietà gestita **ComplianceAssetId** è mappata a una proprietà sottoposta a ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-361">The **ComplianceAssetId** managed property is also mapped to a crawled property.</span></span> <span data-ttu-id="a1795-362">Questo significa che è possibile usare queste proprietà gestite nella ricerca avanzata per recuperare tutti i documenti contrassegnati con un'etichetta di conservazione.</span><span class="sxs-lookup"><span data-stu-id="a1795-362">This means that you can use these managed properties in advanced search to retrieve all documents that have been tagged with a retention label.</span></span>
