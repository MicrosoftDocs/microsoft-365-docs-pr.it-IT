---
title: Gestire gli errori nella ricerca avanzata per Microsoft 365 Defender
description: Comprendere gli errori visualizzati quando si utilizza la ricerca avanzata
keywords: ricerca avanzata, ricerca delle minacce, ricerca di minacce informatiche, microsoft threat protection, Microsoft 365, mtp, m365, ricerca, query, telemetria, schema, kusto, timeout, risorse, errori, errore sconosciuto, limiti, quota, parametro, allocazione
search.product: eADQiWindows 10XVcnh
search.appverid: met150
ms.prod: m365-security
ms.mktglfcycl: deploy
ms.sitesec: library
ms.pagetype: security
f1.keywords:
- NOCSH
ms.author: lomayor
author: lomayor
localization_priority: Normal
manager: dansimp
audience: ITPro
ms.collection:
- M365-security-compliance
- m365initiative-m365-defender
ms.topic: article
ms.technology: m365d
ms.openlocfilehash: e2c10474db5cbfc63e098ac1c2107dd6c29500e9
ms.sourcegitcommit: 956176ed7c8b8427fdc655abcd1709d86da9447e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/23/2021
ms.locfileid: "51066765"
---
# <a name="handle-advanced-hunting-errors"></a><span data-ttu-id="3687b-104">Gestire gli errori di ricerca avanzata</span><span class="sxs-lookup"><span data-stu-id="3687b-104">Handle advanced hunting errors</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender.md)]


<span data-ttu-id="3687b-105">La ricerca avanzata visualizza errori per segnalare errori di sintassi e ogni volta che le query vengono eseguite su [quote e parametri di utilizzo predefiniti.](advanced-hunting-limits.md)</span><span class="sxs-lookup"><span data-stu-id="3687b-105">Advanced hunting displays errors to notify for syntax mistakes and whenever queries hit [predefined quotas and usage parameters](advanced-hunting-limits.md).</span></span> <span data-ttu-id="3687b-106">Fare riferimento alla tabella seguente per suggerimenti su come risolvere o evitare errori.</span><span class="sxs-lookup"><span data-stu-id="3687b-106">Refer to the table below for tips on how to resolve or avoid errors.</span></span>

| <span data-ttu-id="3687b-107">Tipo di errore</span><span class="sxs-lookup"><span data-stu-id="3687b-107">Error type</span></span> | <span data-ttu-id="3687b-108">Causa</span><span class="sxs-lookup"><span data-stu-id="3687b-108">Cause</span></span> | <span data-ttu-id="3687b-109">Risoluzione</span><span class="sxs-lookup"><span data-stu-id="3687b-109">Resolution</span></span> | <span data-ttu-id="3687b-110">Esempi di messaggi di errore</span><span class="sxs-lookup"><span data-stu-id="3687b-110">Error message examples</span></span> |
|--|--|--|--|
| <span data-ttu-id="3687b-111">Errori di sintassi</span><span class="sxs-lookup"><span data-stu-id="3687b-111">Syntax errors</span></span> | <span data-ttu-id="3687b-112">La query contiene nomi non riconosciuti, inclusi i riferimenti a operatori, colonne, funzioni o tabelle inesistenti.</span><span class="sxs-lookup"><span data-stu-id="3687b-112">The query contains unrecognized names, including references to nonexistent operators, columns, functions, or tables.</span></span> | <span data-ttu-id="3687b-113">Verificare che i [riferimenti agli operatori e alle funzioni Kusto siano](/azure/data-explorer/kusto/query/) corretti.</span><span class="sxs-lookup"><span data-stu-id="3687b-113">Ensure references to [Kusto operators and functions](/azure/data-explorer/kusto/query/) are correct.</span></span> <span data-ttu-id="3687b-114">Controllare [lo schema per](advanced-hunting-schema-tables.md) le colonne, le funzioni e le tabelle di ricerca avanzate corrette.</span><span class="sxs-lookup"><span data-stu-id="3687b-114">Check [the schema](advanced-hunting-schema-tables.md) for the correct advanced hunting columns, functions, and tables.</span></span> <span data-ttu-id="3687b-115">Racchiudere le stringhe di variabili tra virgolette in modo che siano riconosciute.</span><span class="sxs-lookup"><span data-stu-id="3687b-115">Enclose variable strings in quotes so they are recognized.</span></span> <span data-ttu-id="3687b-116">Durante la scrittura delle query, utilizzare i suggerimenti di completamento automatico IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="3687b-116">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> | `A recognition error occurred.` |
| <span data-ttu-id="3687b-117">Errori semantici</span><span class="sxs-lookup"><span data-stu-id="3687b-117">Semantic errors</span></span> | <span data-ttu-id="3687b-118">Mentre la query utilizza nomi di operatore, colonna, funzione o tabella validi, esistono errori nella struttura e nella logica risultante.</span><span class="sxs-lookup"><span data-stu-id="3687b-118">While the query uses valid operator, column, function, or table names, there are errors in its structure and resulting logic.</span></span> <span data-ttu-id="3687b-119">In alcuni casi, la ricerca avanzata identifica l'operatore specifico che ha causato l'errore.</span><span class="sxs-lookup"><span data-stu-id="3687b-119">In some cases, advanced hunting identifies the specific operator that caused the error.</span></span> | <span data-ttu-id="3687b-120">Verificare la presenza di errori nella struttura della query.</span><span class="sxs-lookup"><span data-stu-id="3687b-120">Check for errors in the structure of query.</span></span> <span data-ttu-id="3687b-121">Per istruzioni, fare riferimento alla documentazione [di Kusto.](/azure/data-explorer/kusto/query/)</span><span class="sxs-lookup"><span data-stu-id="3687b-121">Refer to [Kusto documentation](/azure/data-explorer/kusto/query/) for guidance.</span></span> <span data-ttu-id="3687b-122">Durante la scrittura delle query, utilizzare i suggerimenti di completamento automatico IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="3687b-122">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> |  `'project' operator: Failed to resolve scalar expression named 'x'`|
| <span data-ttu-id="3687b-123">Timeout</span><span class="sxs-lookup"><span data-stu-id="3687b-123">Timeouts</span></span> | <span data-ttu-id="3687b-124">Una query può essere eseguita solo entro [un periodo limitato prima del timeout.](advanced-hunting-limits.md) Questo errore può verificarsi con maggiore frequenza quando si eseguono query complesse.</span><span class="sxs-lookup"><span data-stu-id="3687b-124">A query can only run within a [limited period before timing out](advanced-hunting-limits.md). This error can happen more frequently when running complex queries.</span></span> | [<span data-ttu-id="3687b-125">Ottimizzare la query</span><span class="sxs-lookup"><span data-stu-id="3687b-125">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Query exceeded the timeout period.` |
| <span data-ttu-id="3687b-126">Limitazione della CPU</span><span class="sxs-lookup"><span data-stu-id="3687b-126">CPU throttling</span></span> | <span data-ttu-id="3687b-127">Le query nello stesso tenant hanno superato le risorse [della CPU](advanced-hunting-limits.md) allocate in base alle dimensioni del tenant.</span><span class="sxs-lookup"><span data-stu-id="3687b-127">Queries in the same tenant have exceeded the [CPU resources](advanced-hunting-limits.md) that have been allocated based on tenant size.</span></span> | <span data-ttu-id="3687b-128">Il servizio controlla l'utilizzo delle risorse della CPU ogni 15 minuti e ogni giorno e visualizza avvisi dopo che l'utilizzo supera il 10% della quota allocata.</span><span class="sxs-lookup"><span data-stu-id="3687b-128">The service checks CPU resource usage every 15 minutes and daily and displays warnings after usage exceeds 10% of the allocated quota.</span></span> <span data-ttu-id="3687b-129">Se si raggiunge l'utilizzo al 100%, il servizio blocca le query fino al successivo ciclo giornaliero o di 15 minuti.</span><span class="sxs-lookup"><span data-stu-id="3687b-129">If you reach 100% utilization, the service blocks queries until after the next daily or 15-minute cycle.</span></span> [<span data-ttu-id="3687b-130">Ottimizzare le query per evitare di raggiungere le quote della CPU</span><span class="sxs-lookup"><span data-stu-id="3687b-130">Optimize your queries to avoid hitting CPU quotas</span></span>](advanced-hunting-best-practices.md) | - `This query used X% of your organization's allocated resources for the current 15 minutes.`<br>- `You have exceeded processing resources allocated to this tenant. You can run queries again in <duration>.` |
| <span data-ttu-id="3687b-131">Limite di dimensioni dei risultati superato</span><span class="sxs-lookup"><span data-stu-id="3687b-131">Result size limit exceeded</span></span>  | <span data-ttu-id="3687b-132">La dimensione aggregata del set di risultati per la query ha superato la dimensione massima.</span><span class="sxs-lookup"><span data-stu-id="3687b-132">The aggregate size of the result set for the query has exceeded the maximum size.</span></span> <span data-ttu-id="3687b-133">Questo errore può verificarsi se il set di risultati è così grande che il troncamento al limite di 10.000 record non può ridurlo a una dimensione accettabile.</span><span class="sxs-lookup"><span data-stu-id="3687b-133">This error can occur if the result set is so large that truncation at the 10,000-record limit can't reduce it to an acceptable size.</span></span> <span data-ttu-id="3687b-134">È più probabile che i risultati con più colonne con contenuto ridimensionabile siano influenzati da questo errore.</span><span class="sxs-lookup"><span data-stu-id="3687b-134">Results that have multiple columns with sizable content are more likely to be impacted by this error.</span></span> | [<span data-ttu-id="3687b-135">Ottimizzare la query</span><span class="sxs-lookup"><span data-stu-id="3687b-135">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Result size limit exceeded. Use "summarize" to aggregate results, "project" to drop uninteresting columns, or "take" to truncate results.` |
| <span data-ttu-id="3687b-136">Consumo eccessivo di risorse</span><span class="sxs-lookup"><span data-stu-id="3687b-136">Excessive resource consumption</span></span> | <span data-ttu-id="3687b-137">La query ha consumato quantità eccessive di risorse ed è stato interrotto il completamento.</span><span class="sxs-lookup"><span data-stu-id="3687b-137">The query has consumed excessive amounts of resources and has been stopped from completing.</span></span> <span data-ttu-id="3687b-138">In alcuni casi, la ricerca avanzata identifica l'operatore specifico che non è stato ottimizzato.</span><span class="sxs-lookup"><span data-stu-id="3687b-138">In some cases, advanced hunting identifies the specific operator that wasn't optimized.</span></span> | [<span data-ttu-id="3687b-139">Ottimizzare la query</span><span class="sxs-lookup"><span data-stu-id="3687b-139">Optimize the query</span></span>](advanced-hunting-best-practices.md) | -`Query stopped due to excessive resource consumption.`<br>-`Query stopped. Adjust use of the <operator name> operator to avoid excessive resource consumption.` |
| <span data-ttu-id="3687b-140">Errori sconosciuti</span><span class="sxs-lookup"><span data-stu-id="3687b-140">Unknown errors</span></span> | <span data-ttu-id="3687b-141">La query non è riuscita a causa di un motivo sconosciuto.</span><span class="sxs-lookup"><span data-stu-id="3687b-141">The query failed because of an unknown reason.</span></span> | <span data-ttu-id="3687b-142">Provare a eseguire di nuovo la query.</span><span class="sxs-lookup"><span data-stu-id="3687b-142">Try running the query again.</span></span> <span data-ttu-id="3687b-143">Contattare Microsoft tramite il portale se le query continuano a restituire errori sconosciuti.</span><span class="sxs-lookup"><span data-stu-id="3687b-143">Contact Microsoft through the portal if queries continue to return unknown errors.</span></span> | `An unexpected error occurred during query execution. Please try again in a few minutes.`

## <a name="related-topics"></a><span data-ttu-id="3687b-144">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3687b-144">Related topics</span></span>
- [<span data-ttu-id="3687b-145">Procedure consigliate per la ricerca avanzata</span><span class="sxs-lookup"><span data-stu-id="3687b-145">Advanced hunting best practices</span></span>](advanced-hunting-best-practices.md)
- [<span data-ttu-id="3687b-146">Quote e parametri di utilizzo</span><span class="sxs-lookup"><span data-stu-id="3687b-146">Quotas and usage parameters</span></span>](advanced-hunting-limits.md)
- [<span data-ttu-id="3687b-147">Comprendere lo schema</span><span class="sxs-lookup"><span data-stu-id="3687b-147">Understand the schema</span></span>](advanced-hunting-schema-tables.md)
- [<span data-ttu-id="3687b-148">Panoramica del linguaggio di query Kusto</span><span class="sxs-lookup"><span data-stu-id="3687b-148">Kusto Query Language overview</span></span>](/azure/data-explorer/kusto/query/)