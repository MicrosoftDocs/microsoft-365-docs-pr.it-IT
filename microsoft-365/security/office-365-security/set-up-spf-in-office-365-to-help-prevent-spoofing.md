---
title: Configurazione di SPF per evitare lo spoofing
f1.keywords:
- CSH
ms.author: tracyp
author: MSFTTracyP
manager: dansimp
ms.date: 11/21/2019
audience: ITPro
ms.topic: how-to
ms.service: O365-seccomp
localization_priority: Priority
search.appverid:
- MET150
ms.assetid: 71373291-83d2-466f-86ea-fc61493743a6
ms.collection:
- M365-security-compliance
ms.custom:
- seo-marvel-apr2020
description: Informazioni su come aggiornare un record DNS (Domain Name Service) per usare un Sender Policy Framework (SPF) con il dominio personalizzato in Office 365.
ms.openlocfilehash: a6cd2a0cf60812bb874c1be63fb2d294cda6d6aa
ms.sourcegitcommit: 31be333178b934c519f419656f4c3a53e1beffdc
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/16/2021
ms.locfileid: "49881718"
---
# <a name="set-up-spf-to-help-prevent-spoofing"></a><span data-ttu-id="7efee-103">Configurazione di SPF per evitare lo spoofing</span><span class="sxs-lookup"><span data-stu-id="7efee-103">Set up SPF to help prevent spoofing</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender-for-office.md)]

- [<span data-ttu-id="7efee-104">Prerequisiti<a name="UpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-104">Prerequisites <a name="UpdateSPFTXT"></a></span></span>](#updating-your-spf-txt-record-for-office-365-a-nameUpdateSPFTXT)
- [<span data-ttu-id="7efee-105">Creare e aggiornare il record SPF TXT per Office 365 <a name="CreateUpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-105">Create / update your SPF TXT record for Office 365 <a name="CreateUpdateSPFTXT"></a></span></span>](#to-create-or-update-your-spf-txt-record-a-namecreateupdatespftxta)
    - [<span data-ttu-id="7efee-106">Come gestire i sottodomini<a name="SPFandSubdomains"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-106">How to handle subdomains? <a name="SPFandSubdomains"></a></span></span>](#how-to-handle-subdomains-a-namespfandsubdomainsa)
- [<span data-ttu-id="7efee-107">Risoluzione dei problemi e procedure consigliate per SPF <a name="TshootingSPF"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-107">SPF troubleshooting and best practices <a name="TshootingSPF"></a></span></span>](#next-steps-after-you-set-up-spf-for-office-365-a-nametshootingspfa)
- [<span data-ttu-id="7efee-108">Esempi avanzati dell'uso di SPF <a name="AdvancedSPFexs"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-108">Advanced SPF examples <a name="AdvancedSPFexs"></a></span></span>](#more-information-about-spf-a-nameadvancedspfexsa)

<span data-ttu-id="7efee-109">In questo articolo viene descritto come aggiornare un record DNS (Domain Name Service) affinché sia possibile utilizzare l'autenticazione della posta elettronica di Sender Policy Framework (SPF) con il dominio personalizzato in Office 365.</span><span class="sxs-lookup"><span data-stu-id="7efee-109">This article describes how to update an Domain Name Service (DNS) record so that you can use Sender Policy Framework (SPF)  email authentication with your custom domain in Office 365.</span></span>

<span data-ttu-id="7efee-110">L'utilizzo di SPF consente di convalidare la posta elettronica in uscita inviata dal dominio personalizzato.</span><span class="sxs-lookup"><span data-stu-id="7efee-110">Using SPF helps to validate outbound email sent from your custom domain.</span></span> <span data-ttu-id="7efee-111">Si tratta di un primo passaggio per configurare i metodi raccomandati di autenticazione della posta elettronica DMARC e DKIM (due altri metodi di autenticazione supportati in Office 365).</span><span class="sxs-lookup"><span data-stu-id="7efee-111">It's a first step in setting up other recommended email authentication methods DMARC and DKIM (two further email authentication methods supported in Office 365).</span></span>

## <a name="updating-your-spf-txt-record-for-office-365"></a><span data-ttu-id="7efee-112">Aggiornamento del record TXT SPF per Office 365<a name="UpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-112">Updating your SPF TXT record for Office 365 <a name="UpdateSPFTXT"></a></span></span>

> [!IMPORTANT]
> <span data-ttu-id="7efee-113">Si consiglia alle **piccole imprese** e agli utenti che non hanno familiarità con gli indirizzi IP o la configurazione DNS di contattare il proprio gestore di domini internet (p. es.</span><span class="sxs-lookup"><span data-stu-id="7efee-113">If you are a **small business**, or are unfamiliar with IP addresses or DNS configuration, call your Internet domain registrar (ex.</span></span> <span data-ttu-id="7efee-114">GoDaddy, Bluehost, web.com), per ottenere assistenza con la configurazione DNS di SPF (e qualsiasi altro metodo di autenticazione della posta elettronica usato).</span><span class="sxs-lookup"><span data-stu-id="7efee-114">GoDaddy, Bluehost, web.com) to ask for help with DNS configuration of SPF (and any other email authentication method).</span></span> <span data-ttu-id="7efee-115">*Inoltre*, se un URL personalizzato non è stato acquistato o non è usato (ossia l'URL che l'utente e i clienti visitano per raggiungere Office 365 termina con **onmicrosoft.com**), SPF è configurato automaticamente nel servizio Office 365.</span><span class="sxs-lookup"><span data-stu-id="7efee-115">*Also*, if you haven't bought, or don't use a custom URL (in other words the URL you and your customers browse to reach Office 365 ends in **onmicrosoft.com**), SPF has been set up for you in the Office 365 service.</span></span> <span data-ttu-id="7efee-116">In questo caso non sono necessari altri passaggi.</span><span class="sxs-lookup"><span data-stu-id="7efee-116">No further steps are required in that case.</span></span> <span data-ttu-id="7efee-117">Grazie per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7efee-117">Thanks for reading.</span></span>

<span data-ttu-id="7efee-118">Prima di aggiornare il record TXT nel sistema DNS, è necessario raccogliere alcune informazioni necessarie per creare il record.</span><span class="sxs-lookup"><span data-stu-id="7efee-118">Before you update the TXT record in DNS, you need to gather some information needed to make the record.</span></span> <span data-ttu-id="7efee-119">Per esempi avanzati e una descrizione dettagliata della sintassi SPF supportata, vedere [Funzionamento di SPF per prevenire spoofing e phishing in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span><span class="sxs-lookup"><span data-stu-id="7efee-119">For advanced examples and a more detailed discussion about supported SPF syntax, see [How SPF works to prevent spoofing and phishing in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span></span>

<span data-ttu-id="7efee-120">Raccogliere le seguenti informazioni:</span><span class="sxs-lookup"><span data-stu-id="7efee-120">Gather this information:</span></span>

- <span data-ttu-id="7efee-121">Il record TXT SPF per il proprio dominio personalizzato, se disponibile.</span><span class="sxs-lookup"><span data-stu-id="7efee-121">The current SPF TXT record for your custom domain, if one exists.</span></span> <span data-ttu-id="7efee-122">Per le istruzioni, vedere [Raccogliere le informazioni necessarie per creare record DNS di Office 365](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/information-for-dns-records).</span><span class="sxs-lookup"><span data-stu-id="7efee-122">For instructions, see [Gather the information you need to create Office 365 DNS records](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/information-for-dns-records).</span></span>

- <span data-ttu-id="7efee-123">Passare ai server di messaggistica e individuare gli indirizzi IP esterni (necessari per tutti i server locali di messaggistica).</span><span class="sxs-lookup"><span data-stu-id="7efee-123">Go to your messaging server(s) and find out the External IP addresses (needed from all on-premises messaging servers).</span></span> <span data-ttu-id="7efee-124">Ad esempio, **131.107.2.200**.</span><span class="sxs-lookup"><span data-stu-id="7efee-124">For example, **131.107.2.200**.</span></span>

- <span data-ttu-id="7efee-p106">Nomi di dominio da utilizzare per tutti i domini di terze parti che è necessario includere nel record TXT SPF. In alcuni provider di posta inviata in massa sono impostati sottodomini da utilizzare per i clienti. Ad esempio, la società MailChimp ha configurato **servers.mcsv.net**.</span><span class="sxs-lookup"><span data-stu-id="7efee-p106">Domain names to use for all third-party domains that you need to include in your SPF TXT record. Some bulk mail providers have set up subdomains to use for their customers. For example, the company MailChimp has set up **servers.mcsv.net**.</span></span>

- <span data-ttu-id="7efee-128">Stabilire quale regola di imposizione utilizzare per il record TXT SPF.</span><span class="sxs-lookup"><span data-stu-id="7efee-128">Figure out what enforcement rule you want to use for your SPF TXT record.</span></span> <span data-ttu-id="7efee-129">La regola **-all** è raccomandata.</span><span class="sxs-lookup"><span data-stu-id="7efee-129">The **-all** rule is recommended.</span></span> <span data-ttu-id="7efee-130">Per informazioni dettagliate sulle altre opzioni di sintassi, vedere [Sintassi del record TXT SPF per Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFSyntaxO365).</span><span class="sxs-lookup"><span data-stu-id="7efee-130">For detailed information about other syntax options, see [SPF TXT record syntax for Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFSyntaxO365).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7efee-131">Per utilizzare un dominio personalizzato, Office 365 richiede l'aggiunta di un record TXT Sender Policy Framework (SPF) al record DNS per prevenire spoofing.</span><span class="sxs-lookup"><span data-stu-id="7efee-131">In order to use a custom domain, Office 365 requires that you add a Sender Policy Framework (SPF) TXT record to your DNS record to help prevent spoofing.</span></span>

## <a name="create-or-update-your-spf-txt-record"></a><span data-ttu-id="7efee-132">Creare o aggiornare il record TXT SPF<a name="CreateUpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-132">Create or update your SPF TXT record <a name="CreateUpdateSPFTXT"></a></span></span>

1. <span data-ttu-id="7efee-133">Assicurarsi di avere familiarità con la sintassi SFP nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="7efee-133">Ensure that you're familiar with the SPF syntax in the following table.</span></span>

   ****

   |<span data-ttu-id="7efee-134">Elemento</span><span class="sxs-lookup"><span data-stu-id="7efee-134">Element</span></span>|<span data-ttu-id="7efee-135">Se si sta utilizzando...</span><span class="sxs-lookup"><span data-stu-id="7efee-135">If you're using...</span></span>|<span data-ttu-id="7efee-136">Comune per i clienti?</span><span class="sxs-lookup"><span data-stu-id="7efee-136">Common for customers?</span></span>|<span data-ttu-id="7efee-137">Aggiungere...</span><span class="sxs-lookup"><span data-stu-id="7efee-137">Add this...</span></span>|
   |---|---|---|---|
   |<span data-ttu-id="7efee-138">1</span><span class="sxs-lookup"><span data-stu-id="7efee-138">1</span></span>|<span data-ttu-id="7efee-139">Qualsiasi sistema di posta elettronica (obbligatorio)</span><span class="sxs-lookup"><span data-stu-id="7efee-139">Any email system (required)</span></span>|<span data-ttu-id="7efee-p108">Comune. Tutti i record TXT SPF devono iniziare con questo valore</span><span class="sxs-lookup"><span data-stu-id="7efee-p108">Common. All SPF TXT records start with this value</span></span>|`v=spf1`|
   |<span data-ttu-id="7efee-142">2</span><span class="sxs-lookup"><span data-stu-id="7efee-142">2</span></span>|<span data-ttu-id="7efee-143">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="7efee-143">Exchange Online</span></span>|<span data-ttu-id="7efee-144">Comune</span><span class="sxs-lookup"><span data-stu-id="7efee-144">Common</span></span>|`include:spf.protection.outlook.com`|
   |<span data-ttu-id="7efee-145">3</span><span class="sxs-lookup"><span data-stu-id="7efee-145">3</span></span>|<span data-ttu-id="7efee-146">Solo per Exchange Online</span><span class="sxs-lookup"><span data-stu-id="7efee-146">Exchange Online dedicated only</span></span>|<span data-ttu-id="7efee-147">Non comune</span><span class="sxs-lookup"><span data-stu-id="7efee-147">Not common</span></span>|`ip4:23.103.224.0/19` <br> `ip4:206.191.224.0/19` <br> `ip4:40.103.0.0/16` <br> `include:spf.protection.outlook.com`|
   |<span data-ttu-id="7efee-148">4</span><span class="sxs-lookup"><span data-stu-id="7efee-148">4</span></span>|<span data-ttu-id="7efee-149">Office 365 Germania, solo Microsoft Cloud Germania</span><span class="sxs-lookup"><span data-stu-id="7efee-149">Office 365 Germany, Microsoft Cloud Germany only</span></span>|<span data-ttu-id="7efee-150">Non comune</span><span class="sxs-lookup"><span data-stu-id="7efee-150">Not common</span></span>|`include:spf.protection.outlook.de`|
   |<span data-ttu-id="7efee-151">5</span><span class="sxs-lookup"><span data-stu-id="7efee-151">5</span></span>|<span data-ttu-id="7efee-152">Un sistema di posta elettronica di terze parti</span><span class="sxs-lookup"><span data-stu-id="7efee-152">Third-party email system</span></span>|<span data-ttu-id="7efee-153">Non comune</span><span class="sxs-lookup"><span data-stu-id="7efee-153">Not common</span></span>|`include:<domain_name>` <p> <span data-ttu-id="7efee-154">\<domain_name\> è il dominio del sistema di posta elettronica di terze parti.</span><span class="sxs-lookup"><span data-stu-id="7efee-154">\<domain_name\> is the domain of the third party email system.</span></span>|
   |<span data-ttu-id="7efee-155">6</span><span class="sxs-lookup"><span data-stu-id="7efee-155">6</span></span>|<span data-ttu-id="7efee-p109">Sistema di posta locale. Ad esempio, di Exchange Online Protection insieme a un altro sistema di posta elettronica</span><span class="sxs-lookup"><span data-stu-id="7efee-p109">On-premises email system. For example, Exchange Online Protection plus another email system</span></span>|<span data-ttu-id="7efee-158">Non comune</span><span class="sxs-lookup"><span data-stu-id="7efee-158">Not common</span></span>|<span data-ttu-id="7efee-159">Utilizzarne uno per ogni sistema di posta elettronica aggiuntivo:</span><span class="sxs-lookup"><span data-stu-id="7efee-159">Use one of these for each additional mail system:</span></span> <p> `ip4:<IP_address>` <br> `ip6:<IP_address>` <br> `include:<domain_name>` <p> <span data-ttu-id="7efee-160">\<IP_address\> e \<domain_name\> sono l'indirizzo IP e il dominio dell'altro sistema di posta che invia i messaggi per conto del dominio.</span><span class="sxs-lookup"><span data-stu-id="7efee-160">\<IP_address\> and \<domain_name\> are the IP address and domain of the other email system that sends mail on behalf of your domain.</span></span>|
   |<span data-ttu-id="7efee-161">7</span><span class="sxs-lookup"><span data-stu-id="7efee-161">7</span></span>|<span data-ttu-id="7efee-162">Qualsiasi sistema di posta elettronica (obbligatorio)</span><span class="sxs-lookup"><span data-stu-id="7efee-162">Any email system (required)</span></span>|<span data-ttu-id="7efee-p110">Comune. Tutti i record TXT SPF finiscono con questo valore</span><span class="sxs-lookup"><span data-stu-id="7efee-p110">Common. All SPF TXT records end with this value</span></span>|`<enforcement rule>` <p> <span data-ttu-id="7efee-165">Può trattarsi di uno dei vari valori.</span><span class="sxs-lookup"><span data-stu-id="7efee-165">This can be one of several values.</span></span> <span data-ttu-id="7efee-166">Consigliamo il valore `-all`.</span><span class="sxs-lookup"><span data-stu-id="7efee-166">We recommend the value `-all`.</span></span>|
   |

2. <span data-ttu-id="7efee-167">Se non è già stato fatto, costituire il record TXT SPF utilizzando la sintassi della tabella.</span><span class="sxs-lookup"><span data-stu-id="7efee-167">If you haven't already done so, form your SPF TXT record by using the syntax from the table.</span></span>

   <span data-ttu-id="7efee-168">Ad esempio, se l'utente è completamente ospitato in Office 365, che significa che non sono presenti server di posta elettronica locali, il record TXT SPF includerà le righe 1, 2 e 7 e si otterrà un risultato simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="7efee-168">For example, if you are fully-hosted in Office 365, that is, you have no on-premises mail servers, your SPF TXT record would include rows 1, 2, and 7 and would look like this:</span></span>

   ```text
   v=spf1 include:spf.protection.outlook.com -all
   ```

   <span data-ttu-id="7efee-169">Questo è il record TXT SPF più comune.</span><span class="sxs-lookup"><span data-stu-id="7efee-169">This is the most common SPF TXT record.</span></span> <span data-ttu-id="7efee-170">Questo record funziona praticamente per tutti, indipendentemente dal fatto che il datacenter di Microsoft si trovi negli Stati Uniti, in Europa (Germania inclusa) o in un'altra area geografica.</span><span class="sxs-lookup"><span data-stu-id="7efee-170">This record works for just about everyone, regardless of whether your Microsoft datacenter is located in the United States, or in Europe (including Germany), or in another location.</span></span>

   <span data-ttu-id="7efee-p113">Tuttavia, se è stato acquistato Office 365 Germania, parte di Microsoft Cloud Germania, è necessario utilizzare l'istruzione inclusa dalla riga 4 anziché dalla riga 2. Ad esempio, se l'utente è completamente ospitato in Office 365 Germania, che significa che non sono presenti server di posta elettronica locali, il record TXT SPF includerà le righe 1, 4 e 7 e si otterrà un risultato simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="7efee-p113">However, if you have purchased Office 365 Germany, part of Microsoft Cloud Germany, you should use the include statement from line 4 instead of line 2. For example, if you are fully-hosted in Office 365 Germany, that is, you have no on-premises mail servers, your SPF TXT record would include rows 1, 4, and 7 and would look like this:</span></span>

   ```text
   v=spf1 include:spf.protection.outlook.de -all
   ```

   <span data-ttu-id="7efee-173">Se l'utente è già distribuito in Office 365, dispone di record TXT SPF configurati per il dominio personalizzato e sta eseguendo la migrazione a Office 365 Germania, è necessario aggiornare il record TXT SPF.</span><span class="sxs-lookup"><span data-stu-id="7efee-173">If you're already deployed in Office 365 and have set up your SPF TXT records for your custom domain, and you're migrating to Office 365 Germany, you need to update your SPF TXT record.</span></span> <span data-ttu-id="7efee-174">Per farlo, cambiare `include:spf.protection.outlook.com` in `include:spf.protection.outlook.de`.</span><span class="sxs-lookup"><span data-stu-id="7efee-174">To do this, change `include:spf.protection.outlook.com` to `include:spf.protection.outlook.de`.</span></span>

3. <span data-ttu-id="7efee-175">Dopo aver creato il record TXT SPF, è necessario aggiornare il record in DNS.</span><span class="sxs-lookup"><span data-stu-id="7efee-175">Once you have formed your SPF TXT record, you need to update the record in DNS.</span></span> <span data-ttu-id="7efee-176">È possibile avere un solo record TXT SPF per un dominio.</span><span class="sxs-lookup"><span data-stu-id="7efee-176">You can only have one SPF TXT record for a domain.</span></span> <span data-ttu-id="7efee-177">Se esiste un record TXT SPF, anziché aggiungere un nuovo record, è necessario aggiornare quello esistente.</span><span class="sxs-lookup"><span data-stu-id="7efee-177">If an SPF TXT record exists, instead of adding a new record, you need to update the existing record.</span></span> <span data-ttu-id="7efee-178">Passare a [Creare record DNS per Office 365](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider) e fare clic sul collegamento relativo al proprio host DNS.</span><span class="sxs-lookup"><span data-stu-id="7efee-178">Go to [Create DNS records for Office 365](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider), and then click the link for your DNS host.</span></span>

4. <span data-ttu-id="7efee-179">Verificare il record TXT SPF.</span><span class="sxs-lookup"><span data-stu-id="7efee-179">Test your SPF TXT record.</span></span>

## <a name="how-to-handle-subdomains"></a><span data-ttu-id="7efee-180">Come gestire i sottodomini</span><span class="sxs-lookup"><span data-stu-id="7efee-180">How to handle subdomains?</span></span> <a name="SPFandSubdomains"></a>

<span data-ttu-id="7efee-181">È importante tenere presente che *è necessario creare un record distinto per ogni sottodominio, in quanto i sottodomini non ereditano il record SPF del dominio di primo livello*.</span><span class="sxs-lookup"><span data-stu-id="7efee-181">It is important to note that *you need to create a separate record for each subdomain as subdomains don't inherit the SPF record of their top level domain*.</span></span>

<span data-ttu-id="7efee-182">Per tutti i domini e sottodomini è necessario un altro record SPF jolly (`*.`) per impedire agli utenti malintenzionati di inviare messaggi di posta elettronica che provengano da sottodomini inesistenti.</span><span class="sxs-lookup"><span data-stu-id="7efee-182">An additional wildcard SPF record (`*.`) is required for every domain and subdomain to prevent attackers from sending email claiming to be from non-existent subdomains.</span></span> <span data-ttu-id="7efee-183">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="7efee-183">For example:</span></span>

```text
*.subdomain.contoso.com. IN TXT "v=spf1 -all"
```

## <a name="next-steps"></a><span data-ttu-id="7efee-184">Passaggi successivi<a name="TshootingSPF"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-184">Next steps <a name="TshootingSPF"></a></span></span>

<span data-ttu-id="7efee-185">Ci sono problemi con il record SPF TXT?</span><span class="sxs-lookup"><span data-stu-id="7efee-185">Having trouble with your SPF TXT record?</span></span> <span data-ttu-id="7efee-186">Leggere [Risoluzione dei problemi: procedure consigliate per SPF in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFTroubleshoot).</span><span class="sxs-lookup"><span data-stu-id="7efee-186">Read [Troubleshooting: Best practices for SPF in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFTroubleshoot).</span></span>


## <a name="what-does-spf-email-authentication-actually-do"></a><span data-ttu-id="7efee-187">Cosa fa effettivamente l'autenticazione SPF della posta elettronica?</span><span class="sxs-lookup"><span data-stu-id="7efee-187">What does SPF email authentication actually do?</span></span>

<span data-ttu-id="7efee-188">SPF identifica quali server di posta elettronica sono autorizzati a inviare posta elettronica per conto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="7efee-188">SPF identifies which mail servers are allowed to send mail on your behalf.</span></span> <span data-ttu-id="7efee-189">In sostanza SPF, insieme a DKIM, DMARC e altre tecnologie supportate da Office 365, aiuta a prevenire spoofing e phishing.</span><span class="sxs-lookup"><span data-stu-id="7efee-189">Basically, SPF, along with DKIM, DMARC, and other technologies supported by Office 365, help prevent spoofing and phishing.</span></span> <span data-ttu-id="7efee-190">SPF viene aggiunto come un record TXT che viene utilizzato da DNS per identificare i server di posta elettronica che possono inviare posta elettronica per conto del dominio personalizzato.</span><span class="sxs-lookup"><span data-stu-id="7efee-190">SPF is added as a TXT record that is used by DNS to identify which mail servers can send mail on behalf of your custom domain.</span></span> <span data-ttu-id="7efee-191">I sistemi di posta elettronica del destinatario fanno riferimento al record TXT SPF per stabilire se un messaggio di un dominio personalizzato proviene da un server di messaggistica autorizzato.</span><span class="sxs-lookup"><span data-stu-id="7efee-191">Recipient mail systems refer to the SPF TXT record to determine whether a message from your custom domain comes from an authorized messaging server.</span></span>

<span data-ttu-id="7efee-p120">Ad esempio, si supponga che il dominio personalizzato contoso.com utilizzi Office 365. Si aggiunge un record TXT SPF che elenca i server di messaggistica di Office 365 come server di posta elettronica legittimi per il dominio. Quando il server di messaggistica ricevente riceve un messaggio da joe@contoso.com, il server cerca il record TXT SPF per contoso.com e scopre se il messaggio è valido. Se il server di destinazione rileva che il messaggio proviene da un server di messaggistica di Office 365 diverso da quelli elencati nel record SPF, il server di posta di destinazione può scegliere di rifiutare il messaggio come posta indesiderata.</span><span class="sxs-lookup"><span data-stu-id="7efee-p120">For example, let's say that your custom domain contoso.com uses Office 365. You add an SPF TXT record that lists the Office 365 messaging servers as legitimate mail servers for your domain. When the receiving messaging server gets a message from joe@contoso.com, the server looks up the SPF TXT record for contoso.com and finds out whether the message is valid. If the receiving server finds out that the message comes from a server other than the Office 365 messaging servers listed in the SPF record, the receiving mail server can choose to reject the message as spam.</span></span>

<span data-ttu-id="7efee-p121">Inoltre, se nel dominio personalizzato non è presente un record TXT SPF, alcuni server di destinazione possono rifiutare il messaggio immediatamente. Ciò avviene perché il server di destinazione non può convalidare che il messaggio provenga da un server di messaggistica autorizzato.</span><span class="sxs-lookup"><span data-stu-id="7efee-p121">Also, if your custom domain does not have an SPF TXT record, some receiving servers may reject the message outright. This is because the receiving server cannot validate that the message comes from an authorized messaging server.</span></span>

<span data-ttu-id="7efee-p122">Se la posta di Office 365 è già stata sincronizzata, i server di messaggistica Microsoft sono già stati inclusi nel sistema DNS come record TXT SPF. Tuttavia, esistono alcuni casi in cui è necessario aggiornare il record TXT SPF nel sistema DNS. Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="7efee-p122">If you've already set up mail for Office 365, then you have already included Microsoft's messaging servers in DNS as an SPF TXT record. However, there are some cases where you may need to update your SPF TXT record in DNS. For example:</span></span>

- <span data-ttu-id="7efee-p123">In precedenza, era necessario aggiungere un record SPF o TXT diverso al dominio personalizzato se si utilizzava SharePoint Online. Ciò non è più necessario. Questa modifica dovrebbe ridurre il rischio che i messaggi di notifica di SharePoint Online finiscano nella cartella Posta indesiderata. Aggiornare il record SPF o TXT se si sta raggiungendo il limite di 10 ricerche e si stanno visualizzando errori del tipo "limite di ricerche superato" e "troppi hop".</span><span class="sxs-lookup"><span data-stu-id="7efee-p123">Previously, you had to add a different SPF TXT record to your custom domain if you were using SharePoint Online. This is no longer required. This change should reduce the risk of SharePoint Online notification messages ending up in the Junk Email folder. Update your SPF TXT record if you are hitting the 10 lookup limit and receiving errors that say things like, "exceeded the lookup limit" and "too many hops".</span></span>

- <span data-ttu-id="7efee-205">Se si dispone di un ambiente ibrido con Office 365 ed Exchange in locale.</span><span class="sxs-lookup"><span data-stu-id="7efee-205">If you have a hybrid environment with Office 365 and Exchange on-premises.</span></span>

- <span data-ttu-id="7efee-206">Si intende configurare DKIM e DMARC (scelta consigliata).</span><span class="sxs-lookup"><span data-stu-id="7efee-206">You intend to set up DKIM and DMARC (recommended).</span></span>

## <a name="more-information-about-spf"></a><span data-ttu-id="7efee-207">Per ulteriori informazioni su SPF<a name="AdvancedSPFexs"></a></span><span class="sxs-lookup"><span data-stu-id="7efee-207">More information about SPF <a name="AdvancedSPFexs"></a></span></span>

<span data-ttu-id="7efee-208">Per esempi avanzati e una descrizione dettagliata della sintassi SPF supportata, dello spoofing, della risoluzione dei problemi e di come Office 365 supporta SPF, vedere [Come funziona SPF per impedire spoofing e phishing in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span><span class="sxs-lookup"><span data-stu-id="7efee-208">For advanced examples, a more detailed discussion about supported SPF syntax, spoofing, troubleshooting, and how Office 365 supports SPF, see [How SPF works to prevent spoofing and phishing in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span></span>

## <a name="links-to-configure-dkim-and-dmarc"></a><span data-ttu-id="7efee-209">Collegamenti alla configurazione di DKIM e DMARC</span><span class="sxs-lookup"><span data-stu-id="7efee-209">Links to configure DKIM and DMARC</span></span>

 <span data-ttu-id="7efee-210">SPF è progettato per prevenire spoofing, ma esistono tecniche di spoofing che SPF non è in grado di evitare.</span><span class="sxs-lookup"><span data-stu-id="7efee-210">SPF is designed to help prevent spoofing, but there are spoofing techniques that SPF can't protect against.</span></span> <span data-ttu-id="7efee-211">Per difendersi da queste minacce, dopo aver configurato SPF è consigliabile configurare anche DKIM e DMARC per Office 365.</span><span class="sxs-lookup"><span data-stu-id="7efee-211">To defend against these, once you've set up SPF, you should configure DKIM and DMARC for Office 365.</span></span>

<span data-ttu-id="7efee-212">L'obiettivo dell'autenticazione [DKIM](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dkim-to-validate-outbound-email?view=o365-worldwide) della posta elettronica è dimostrare che il contenuto del messaggio non è stato manomesso.</span><span class="sxs-lookup"><span data-stu-id="7efee-212">[DKIM](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dkim-to-validate-outbound-email?view=o365-worldwide) email authentication's goal is to prove the contents of the mail haven't been tampered with.</span></span>

<span data-ttu-id="7efee-213">L'obiettivo dell'autenticazione [DMARC](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dmarc-to-validate-email?view=o365-worldwide) della posta elettronica è assicurare che le informazioni SPF e DKIM corrispondano all'indirizzo Da.</span><span class="sxs-lookup"><span data-stu-id="7efee-213">[DMARC](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dmarc-to-validate-email?view=o365-worldwide) email authentication's goal is to make sure that SPF and DKIM information matches the From address.</span></span>