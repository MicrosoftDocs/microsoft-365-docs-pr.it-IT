---
title: Configurazione dei criteri anti-malware
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
localization_priority: Normal
search.appverid:
- MET150
ms.assetid: b0cfc21f-e3c6-41b6-8670-feb2b2e252e5
ms.collection:
- M365-security-compliance
- m365initiative-defender-office365
description: Gli amministratori possono imparare a visualizzare, creare, modificare e rimuovere i criteri antimalware in Exchange Online Protection (EOP).
ms.custom: seo-marvel-apr2020
ms.technology: mdo
ms.prod: m365-security
ms.openlocfilehash: 6f6d7bb8f6759914111ffb3be4f4b39fc37d4700
ms.sourcegitcommit: b09aee96a1e2266b33ba81dfe497f24c5300bb56
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/06/2021
ms.locfileid: "52789076"
---
# <a name="configure-anti-malware-policies-in-eop"></a>Configurare i criteri antimalware in EOP

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender-for-office.md)]

**Si applica a**
- [Exchange Online Protection](exchange-online-protection-overview.md)
- [Microsoft Defender per Office 365 piano 1 e piano 2](defender-for-office-365.md)
- [Microsoft 365 Defender](../defender/microsoft-365-defender.md)

Nelle Microsoft 365 con cassette postali in Exchange Online o in organizzazioni di Exchange Online Protection (EOP) autonome senza cassette postali di Exchange Online, i messaggi di posta elettronica vengono protetti automaticamente dal malware da EOP. EOP usa i criteri antimalware per le impostazioni di protezione da malware. Per ulteriori informazioni, vedere [Protezione antimalware.](anti-malware-protection.md)

Gli amministratori possono visualizzare, modificare e configurare (ma non eliminare) il criterio antimalware predefinito per soddisfare le esigenze delle loro organizzazioni. Per una maggiore granularità, è inoltre possibile creare criteri antimalware personalizzati che si applicano a utenti, gruppi o domini specifici dell'organizzazione. I criteri personalizzati hanno sempre la precedenza sul criterio predefinito, ma non è possibile modificarne la priorità (in funzione).

È possibile configurare i criteri antimalware nel Centro sicurezza Microsoft 365 o in PowerShell (Exchange Online PowerShell per organizzazioni Microsoft 365 con cassette postali in Exchange Online; PowerShell EOP autonomo per le organizzazioni senza cassette postali di Exchange Online).

## <a name="what-do-you-need-to-know-before-you-begin"></a>Che cosa è necessario sapere prima di iniziare?

- Aprire il Centro sicurezza a <https://security.microsoft.com/>. Per passare direttamente alla **pagina Antimalware,** utilizzare <https://security.microsoft.com/antimalwarev2> .

- Per informazioni su come connettersi a PowerShell per Exchange Online, vedere [Connettersi a PowerShell per Exchange Online](/powershell/exchange/connect-to-exchange-online-powershell). Per connettersi a PowerShell di EOP autonomo, vedere [Connettersi a PowerShell per Exchange Online Protection](/powershell/exchange/connect-to-exchange-online-protection-powershell).

- Prima di eseguire le procedure descritte in questo articolo, occorre disporre delle autorizzazioni in **Exchange Online**:
  - Per aggiungere, modificare ed eliminare criteri antimalware, è necessario essere membri dei gruppi **di** ruoli Gestione organizzazione o Amministratore **sicurezza.**
  - Per l'accesso in sola lettura ai criteri antimalware, è necessario essere membri dei gruppi di ruoli **Lettore** globale o **Lettore** di sicurezza.

  Per altre informazioni, vedere [Autorizzazioni in Exchange Online](/exchange/permissions-exo/permissions-exo).

  **Note**:

  - L'aggiunta di utenti al ruolo di Azure Active Directory corrispondente nell'interfaccia di amministrazione di Microsoft 365 fornisce agli utenti le autorizzazioni necessarie _e_ le autorizzazioni per altre funzionalità di Microsoft 365. Per altre informazioni, vedere [Informazioni sui ruoli di amministratore](../../admin/add-users/about-admin-roles.md).
  - Anche il gruppo di ruoli di **Gestione organizzazione sola visualizzazione** in [Exchange Online](/Exchange/permissions-exo/permissions-exo#role-groups) offre inoltre l'accesso di sola lettura a tale funzionalità.

- Per le impostazioni consigliate per i criteri antimalware, vedere [Impostazioni dei criteri antimalware EOP.](recommended-settings-for-eop-and-office365.md#eop-anti-malware-policy-settings)

## <a name="use-the-security-center-to-create-anti-malware-policies"></a>Usare il Centro sicurezza per creare criteri antimalware

La creazione di un criterio antimalware personalizzato nel Centro sicurezza crea contemporaneamente la regola di filtro antimalware e il criterio di filtro antimalware associato utilizzando lo stesso nome per entrambi.

1. Nel centro sicurezza passare a Criteri **di** collaborazione & posta elettronica & regole Criteri di minaccia \>  \>  \>  sezione \> **Antimalware**.

2. Nella pagina **Antimalware** fare clic su ![ Crea icona ](../../media/m365-cc-sc-create-icon.png) **Crea**.

3. Viene aperta la creazione guidata criteri. Nella pagina **Assegnare un nome al** criterio configurare queste impostazioni:
   - **Nome**: immettere un nome univoco descrittivo per il criterio.
   - **Descrizione**: immettere una descrizione opzionale per il criterio.

   Al termine dell'operazione, fare clic su **Avanti**.

4. Nella pagina **Utenti e domini** visualizzata identificare i destinatari interni a cui si applica il criterio (condizioni del destinatario):
   - **Utenti**: la cassette postali specificate, utenti di posta o contatti di posta specificati nell'organizzazione.
   - **Gruppi**: i gruppi di distribuzione specificati, gruppi di sicurezza abilitati alla posta elettronica o gruppi di Microsoft 365 nell'organizzazione.
   - **Domini**: tutti i destinatari nei domini specificati [accettati](/exchange/mail-flow-best-practices/manage-accepted-domains/manage-accepted-domains) nell'organizzazione.

   Fare clic nella casella appropriata, iniziare a digitare un valore e selezionare il valore desiderato nei risultati. Ripetere questa procedura tutte le volte necessarie. Per rimuovere un valore esistente, fare clic su Rimuovi ![Icona Rimuovi](../../media/m365-cc-sc-remove-selection-icon.png) accanto al valore.

   Per utenti o gruppi è possibile usare la maggior parte degli identificatori, ad esempio nome, nome visualizzato, alias, indirizzo di posta elettronica, nome dell'account e così via, ma il nome visualizzato corrispondente viene visualizzato nei risultati. Per gli utenti, immettere un asterisco (\*) da solo per visualizzare tutti i valori disponibili.

   Più valori della stessa condizione utilizzano la logica OR (ad esempio, _\<recipient1\>_ o _\<recipient2\>_). Condizioni diverse utilizzano la logica AND (ad esempio, _\<recipient1\>_ e _\<member of group 1\>_).

   - **Escludere questi utenti, gruppi e domini**: per aggiungere eccezioni per i destinatari interni a cui si applicano i criteri (eccezione destinatari), selezionare questa opzione e configurare le eccezioni. Impostazioni e comportamento sono equivalenti alle condizioni.

   Al termine dell'operazione, fare clic su **Avanti**.

5. Nella pagina **Impostazioni di** protezione visualizzata configurare le impostazioni seguenti:

   - **Abilita il filtro allegati comuni:** se si seleziona questa opzione, i messaggi con gli allegati specificati vengono considerati malware e vengono messi automaticamente in quarantena. È possibile modificare l'elenco predefinito selezionando **Personalizza tipi di file.**

   - Abilita eliminazione automatica di zero ore per **il malware:** se si seleziona questa opzione, ZAP metta in quarantena i messaggi di malware già recapitati. Per ulteriori informazioni, vedere [Zero-hour auto purge (ZAP) in Exchange Online](zero-hour-auto-purge.md). Selezionare uno di questi valori:

   - **Notificare ai destinatari quando i messaggi vengono messi in quarantena come malware:**
     - Se si seleziona questa opzione, il messaggio viene messo in quarantena senza alcuna notifica ai destinatari previsti.
     - Se non si seleziona questa opzione, il messaggio viene messo in quarantena. Una copia del messaggio viene recapitata  ai destinatari, ma tutti gli allegati (non solo quelli rilevati) vengono sostituiti con un singolo file di testo denominato **Malware Alert Text.txt**.

       Il testo predefinito nel file di testo sostitutivo è descritto in [Criteri antimalware.](anti-malware-protection.md#anti-malware-policies) Per usare invece il testo personalizzato, immettere il testo nella **casella Testo personalizzato notifica al destinatario.**

   - **Notifiche mittente:** selezionare nessuna, una o entrambe le opzioni seguenti:
       - **Notificare ai mittenti interni quando i messaggi vengono messi in quarantena come malware:** un mittente interno è all'interno dell'organizzazione.
       - **Notificare ai mittenti esterni quando i messaggi vengono messi in quarantena come malware:** un mittente esterno è esterno all'organizzazione.

   - **Notifiche dell'amministratore:** selezionare nessuna, una o entrambe le opzioni seguenti:
       - **Notificare a un** amministratore i messaggi non recapitati dai mittenti interni: se  si seleziona questa opzione, immettere un indirizzo di posta elettronica di notifica nella casella Indirizzo di posta elettronica amministratore visualizzata.
       - **Notificare a un** amministratore i messaggi non recapitati da mittenti esterni: se  si seleziona questa opzione, immettere un indirizzo di posta elettronica di notifica nella casella Indirizzo di posta elettronica amministratore visualizzata.

   - **Personalizzare le** notifiche: queste impostazioni sostituiscono il testo di notifica predefinito utilizzato per mittenti o amministratori. Per ulteriori informazioni sui valori predefiniti, vedere [Criteri antimalware.](anti-malware-protection.md#anti-malware-policies)
       - **Usa testo** di notifica personalizzato: se si seleziona  questa opzione, è necessario utilizzare le caselle Nome mittente e Indirizzo mittente per specificare il nome del mittente e l'indirizzo di posta elettronica utilizzato nel messaggio di notifica personalizzato. 
       - **Personalizzare** le notifiche per i messaggi provenienti da mittenti interni: se si è scelto di inviare una  notifica  a mittenti o amministratori sui messaggi non recapitabili provenienti da mittenti interni, è necessario utilizzare le caselle Oggetto e Messaggio per specificare l'oggetto e il corpo del messaggio di notifica personalizzato.
       - **Personalizzare** le notifiche per i messaggi provenienti da mittenti esterni: se si è scelto di notificare a  mittenti o amministratori i messaggi non recapitabili provenienti da mittenti esterni, è necessario utilizzare le caselle Oggetto e Messaggio per specificare l'oggetto e il corpo del messaggio di notifica personalizzato. 

   Al termine dell'operazione, fare clic su **Avanti**.

6. Nella pagina **Controllo** visualizzata controllare le impostazioni. È possibile selezionare **Modifica** in ogni sezione per modificare le impostazioni all'interno della sezione.

   Al termine, fare clic su **Invia.**

7. Nel messaggio di conferma visualizzato fare clic su **Fatto**.

## <a name="use-the-security-center-to-view-anti-malware-policies"></a>Usare il Centro sicurezza per visualizzare i criteri antimalware

1. Nel centro sicurezza passare alla sezione Criteri di **&** di collaborazione & regole Criteri di minaccia \>  \>  \>  \> **sezione Antimalware**.

2. Nella pagina **Antimalware** vengono visualizzate le proprietà seguenti nell'elenco dei criteri antimalware:

   - **Nome**
   - **Stato**
   - **Priorità**

3. Quando si seleziona un criterio facendo clic sul nome, le impostazioni dei criteri vengono visualizzate in un riquadro a comparsa.

## <a name="use-the-security-center-to-modify-anti-malware-policies"></a>Utilizzare il Centro sicurezza per modificare i criteri antimalware

1. Nel centro sicurezza passare alla sezione Criteri di **&** di collaborazione & regole Criteri di minaccia \>  \>  \>  \> **sezione Antimalware**.

2. Nella pagina **Antimalware** seleziona un criterio dall'elenco facendo clic sul nome.

3. Nel riquadro a comparsa dei dettagli sui criteri visualizzato selezionare **Modifica** in ogni sezione per modificare le impostazioni all'interno della sezione. Per ulteriori informazioni sulle impostazioni, vedere la sezione precedente Usare il Centro sicurezza per creare criteri [antimalware](#use-the-security-center-to-create-anti-malware-policies) in questo articolo.  

   Per il criterio antimalware predefinito, la sezione **Utenti,** gruppi e domini non è disponibile (il criterio si applica a tutti) e non è possibile rinominare il criterio.

Per abilitare o disabilitare un criterio o impostare l'ordine di priorità dei criteri, vedere le sezioni seguenti.

### <a name="enable-or-disable-custom-anti-malware-policies"></a>Abilitare o disabilitare i criteri antimalware personalizzati

Non è possibile disabilitare il criterio antimalware predefinito.

1. Nel centro sicurezza passare alla sezione Criteri di **&** di collaborazione & regole Criteri di minaccia \>  \>  \>  \> **sezione Antimalware**.

2. Nella pagina **Antimalware** selezionare un criterio personalizzato dall'elenco facendo clic sul nome.

3. Nella parte superiore del riquadro a comparsa dei dettagli sui criteri visualizzato è presente uno dei valori seguenti:
   - **Criterio disattivato**: per attivare il criterio, fare clic su ![Attiva icona](../../media/m365-cc-sc-turn-on-off-icon.png) **Attiva** .
   - **Criterio attivato**: per disattivare il criterio, fare clic su ![Disattiva icona](../../media/m365-cc-sc-turn-on-off-icon.png) **Disattiva**.

4. Nella finestra di dialogo di conferma visualizzata fare clic su **Attiva** o **Disattiva**.

5. Fare clic su **Chiudi** nel riquadro a comparsa dei dettagli del criterio.

Tornare alla pagina dei criteri principale, il valore **Stato** del criterio sarà **Attivato** o **Disattivato**.

### <a name="set-the-priority-of-custom-anti-malware-policies"></a>Impostare la priorità dei criteri antimalware personalizzati

Per impostazione predefinita, ai criteri antimalware viene data una priorità basata sull'ordine in cui sono stati creati (i criteri più recenti hanno una priorità più bassa rispetto ai criteri precedenti). Un valore di priorità inferiore indica una priorità più alta per il criterio (0 è il massimo) e i criteri vengono elaborati nell'ordine di priorità (i criteri con priorità più elevata vengono elaborati prima di quelli con priorità più bassa). Nessun criterio può avere la stessa priorità e l'elaborazione dei criteri termina dopo l'applicazione del primo criterio.

Per modificare la priorità di un criterio, fare clic su **Aumenta priorità** o **Riduci priorità** nelle proprietà del criterio. (Non è possibile modificare direttamente il numero di **Priorità** nel Centro sicurezza). La modifica di priorità di un criterio è utile solo se si hanno più criteri.

 **Note**:

- Nel Centro sicurezza, è possibile modificare la priorità del criterio antimalware solo dopo aver creato il criterio. In PowerShell, è possibile ignorare la priorità predefinita quando si crea la regola di filtro antimalware (che può influire sulla priorità delle regole esistenti).
- I criteri antimalware vengono elaborati nell'ordine in cui vengono visualizzati (il primo criterio ha il **valore Priority** 0). Il criterio antimalware predefinito ha il valore di priorità **Lowest** e non è possibile modificarlo.

1. Nel centro sicurezza passare alla sezione Criteri di **&** di collaborazione & regole Criteri di minaccia \>  \>  \>  \> **sezione Antimalware**.

2. Nella pagina **Antimalware** selezionare un criterio personalizzato dall'elenco facendo clic sul nome.

3. Nella parte superiore del riquadro a comparsa dei dettagli sui criteri visualizzato viene visualizzato **Aumenta priorità** o **Riduci priorità** in base al valore di priorità corrente e al numero di criteri personalizzati:
   - Il criterio antimalware con il **valore Priority** **0** ha solo l'opzione **Riduci** priorità disponibile.
   - Il criterio antimalware con il valore **priority** più basso (ad esempio, **3**) ha solo l'opzione **Aumenta** priorità disponibile.
   - Se si dispone di tre o più criteri antimalware, i  criteri tra i valori di priorità più alta e più bassa hanno entrambe le opzioni Aumenta priorità e **Riduci** priorità disponibili.

   Fare clic![ sull’icona Aumenta priorità](../../media/m365-cc-sc-increase-icon.png) **Aumenta priorità** o ![sull’icona Riduci priorità](../../media/m365-cc-sc-decrease-icon.png) **Riduci priorità** per modificare il valore **Priorità**.

4. Al termine, fare clic su **Chiudi** nel riquadro a comparsa dei dettagli del criterio.

## <a name="use-the-security-center-to-remove-custom-anti-malware-policies"></a>Usare il Centro sicurezza per rimuovere criteri antimalware personalizzati

Quando si utilizza il Centro sicurezza per rimuovere un criterio antimalware personalizzato, la regola di filtro antimalware e il criterio di filtro antimalware corrispondente vengono eliminati entrambi. Non è possibile rimuovere il criterio antimalware predefinito.

1. Nel centro sicurezza passare alla sezione Criteri di **&** di collaborazione & regole Criteri di minaccia \>  \>  \>  \> **sezione Antimalware**.

2. Selezionare un criterio personalizzato dall'elenco facendo clic sul nome del criterio. Nella parte superiore del riquadro a comparsa dei dettagli sui criteri visualizzato fare clic![ sull'icona Altre azioni](../../media/m365-cc-sc-more-actions-icon.png) **Altre azioni** \> ![Icona Elimina criterio](../../media/m365-cc-sc-delete-icon.png) **Elimina criterio**.

3. Nella finestra di dialogo di conferma che viene visualizzata fare clic su **Sì**.

## <a name="use-exchange-online-powershell-or-standalone-eop-powershell-to-configure-anti-malware-policies"></a>Utilizzare Exchange Online PowerShell o PowerShell EOP autonomo per configurare i criteri antimalware

Per ulteriori informazioni sui criteri di protezione da posta indesiderata in PowerShell, vedere Criteri antimalware nel Centro sicurezza [Microsoft 365 e PowerShell.](anti-malware-protection.md#anti-malware-policies-in-the-microsoft-365-security-center-vs-powershell)

### <a name="use-powershell-to-create-anti-malware-policies"></a>Utilizzare PowerShell per creare criteri antimalware

La creazione di un criterio antimalware in PowerShell è un processo in due passaggi:

1. Creare il criterio del filtro antimalware.
2. Creare la regola del filtro antimalware che identifica il criterio del filtro antimalware cui viene applicata la regola.

 **Note**:

- È possibile creare una nuova regola di filtro antimalware e assegnarle un criterio di filtro antimalware esistente e non associazione. Una regola di filtro antimalware non può essere associata a più criteri di filtro antimalware.
- Esistono due impostazioni che è possibile configurare nei nuovi criteri antimalware in PowerShell che non sono disponibili nel Centro sicurezza finché non si crea il criterio:
  - Creare il nuovo criterio come disabilitato (_Abilitato_ `$false` nel cmdlet **New-MalwareFilterRule).**
  - Impostare la priorità del criterio durante la creazione (_Priority_ _\<Number\>_ ) nel cmdlet **New-MalwareFilterRule.**
- Un nuovo criterio di filtro antimalware creato in PowerShell non è visibile nel Centro sicurezza finché non si assegna il criterio a una regola di filtro antimalware.

#### <a name="step-1-use-powershell-to-create-a-malware-filter-policy"></a>Passaggio 1: Usare PowerShell per creare un criterio di filtro antimalware

**Nota:** nel servizio basato su cloud, i valori _del parametro Action_ , e non `DeleteMessage` `DeleteAttachmentAndUseDefaultAlert` `DeleteAttachmentAndUseCustomAlert` eliminano i messaggi. Al contrario, i messaggi vengono messi in quarantena. Per ulteriori informazioni sul recupero dei messaggi in quarantena, vedere [Manage quarantined messages and files as an admin in EOP.](manage-quarantined-messages-and-files.md)

Per creare un criterio di filtro di antimalware, utilizzare questa sintassi:

```PowerShell
New-MalwareFilterPolicy -Name "<PolicyName>" [-Action <DeleteMessage | DeleteAttachmentAndUseDefaultAlert | DeleteAttachmentAndUseCustomAlert>] [-AdminDisplayName "<OptionalComments>"] [-CustomNotifications <$true | $false>] [<Inbound notification options>] [<Outbound notification options>]
```

Con questo esempio viene creato un nuovo criterio per il filtro antimalware denominato Contoso Malware Filter Policy con queste impostazioni:

- Mettere in quarantena i messaggi che contengono malware senza notificare i destinatari (non si utilizza il parametro _Action_ e il valore predefinito è `DeleteMessage` ).
- Non informare il mittente del messaggio quando viene rilevato malware nel messaggio (non vengono utilizzati i parametri _EnableExternalSenderNotifications_ o _EnableInternalSenderNotifications_ e il valore predefinito per entrambi è `$false` ).
- Notifica all'amministratore admin@contoso.com quando viene rilevato malware in un messaggio proveniente da un mittente interno.

```PowerShell
New-MalwareFilterPolicy -Name "Contoso Malware Filter Policy" -EnableInternalSenderAdminNotifications $true -InternalSenderAdminAddress admin@contoso.com
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [New-MalwareFilterPolicy](/powershell/module/exchange/new-malwarefilterpolicy).

#### <a name="step-2-use-powershell-to-create-a-malware-filter-rule"></a>Passaggio 2: Utilizzare PowerShell per creare una regola di filtro antimalware

Per creare una regola di filtro di antimalware, utilizzare questa sintassi:

```PowerShell
New-MalwareFilterRule -Name "<RuleName>" -MalwareFilterPolicy "<PolicyName>" <Recipient filters> [<Recipient filter exceptions>] [-Comments "<OptionalComments>"]
```

Questo esempio crea una nuova regola di filtro malware denominata Contoso Recipients con queste impostazioni:

- Il criterio di filtro antimalware denominato Contoso Malware Filter Policy viene associato alla regola.
- La regola si applica ai destinatari nel dominio contoso.com.

```PowerShell
New-MalwareFilterRule -Name "Contoso Recipients" -MalwareFilterPolicy "Contoso Malware Filter Policy" -RecipientDomainIs contoso.com
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [New-MalwareFilterRule](/powershell/module/exchange/new-malwarefilterrule).

### <a name="use-powershell-to-view-malware-filter-policies"></a>Usare PowerShell per visualizzare i criteri di filtro antimalware

Per visualizzare un elenco riepilogativo di tutti i criteri di filtro antimalware, eseguire questo comando:

```PowerShell
Get-MalwareFilterPolicy
```

Per visualizzare informazioni dettagliate su un criterio di filtro antimalware specifico, utilizzare questa sintassi:

```PowerShell
Get-MalwareFilterPolicy -Identity "<PolicyName>" | Format-List [<Specific properties to view>]
```

In questo esempio vengono visualizzati tutti i valori delle proprietà per il criterio di filtro antimalware denominato Executives.

```PowerShell
Get-MalwareFilterPolicy -Identity "Executives" | Format-List
```

In questo esempio vengono visualizzate solo le proprietà specificate per lo stesso criterio.

```PowerShell
Get-MalwareFilterPolicy -Identity "Executives" | Format-List Action,AdminDisplayName,CustomNotifications,Enable*Notifications
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [Get-MalwareFilterPolicy](/powershell/module/exchange/get-malwarefilterpolicy).

### <a name="use-powershell-to-view-malware-filter-rules"></a>Usare PowerShell per visualizzare le regole di filtro antimalware

Per visualizzare un elenco riepilogativo di tutte le regole di filtro antimalware, eseguire questo comando:

```PowerShell
Get-MalwareFilterRule
```

Per filtrare l'elenco in base alle regole abilitate o disabilitate, eseguire i comandi seguenti:

```PowerShell
Get-HostedContentFilterRule -State Disabled
```

```PowerShell
Get-HostedContentFilterRule -State Enabled
```

Per visualizzare informazioni dettagliate su una regola di filtro antimalware specifica, utilizzare questa sintassi:

```PowerShell
Get-MalwareFilterRule -Identity "<RuleName>" | Format-List [<Specific properties to view>]
```

In questo esempio vengono visualizzati tutti i valori delle proprietà per la regola di filtro antimalware denominata Executives.

```PowerShell
Get-MalwareFilterRule -Identity "Executives" | Format-List
```

In questo esempio vengono visualizzate solo le proprietà specificate per la stessa regola.

```PowerShell
Get-MalwareFilterRule -Identity "Executives" | Format-List Name,Priority,State,MalwareFilterPolicy,*Is,*SentTo,*MemberOf
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [Get-MalwareFilterRule](/powershell/module/exchange/get-malwarefilterrule).

### <a name="use-powershell-to-modify-malware-filter-policies"></a>Utilizzare PowerShell per modificare i criteri di filtro antimalware

Oltre agli elementi seguenti, le stesse impostazioni sono disponibili quando si modifica un criterio di filtro antimalware in PowerShell come quando si crea il criterio come descritto nella sezione [Passaggio 1:](#step-1-use-powershell-to-create-a-malware-filter-policy) utilizzare PowerShell per creare un criterio di filtro antimalware più indietro in questo articolo.

- L'opzione _MakeDefault_ che trasforma il criterio specificato nel criterio predefinito  (applicato a tutti, priorità minima non modificabile e non è possibile eliminarlo) è disponibile solo quando si modifica un criterio di filtro antimalware in PowerShell.
- Non è possibile rinominare un criterio di filtro antimalware (il cmdlet **Set-MalwareFilterPolicy** non dispone di _alcun parametro Name)._ Quando si rinomina un criterio antimalware nel Centro sicurezza, si rinomina solo la regola di filtro _antimalware._

Per modificare un criterio di filtro di antimalware, utilizzare questa sintassi:

```PowerShell
Set-MalwareFilterPolicy -Identity "<PolicyName>" <Settings>
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [Set-MalwareFilterPolicy](/powershell/module/exchange/set-malwarefilterpolicy).

### <a name="use-powershell-to-modify-malware-filter-rules"></a>Utilizzare PowerShell per modificare le regole di filtro antimalware

L'unica impostazione non disponibile quando si modifica una regola di filtro antimalware in PowerShell è il parametro _Enabled_ che consente di creare una regola disabilitata. Per abilitare o disabilitare le regole di filtro antimalware esistenti, vedere la sezione successiva.

In caso contrario, non sono disponibili impostazioni aggiuntive quando si modifica una regola di filtro antimalware in PowerShell. Le stesse impostazioni sono disponibili quando si crea una regola come descritto nella sezione [Passaggio 2:](#step-2-use-powershell-to-create-a-malware-filter-rule) Utilizzare PowerShell per creare una regola di filtro antimalware in precedenza in questo articolo.

Per modificare una regola di filtro di antimalware, utilizzare questa sintassi:

```PowerShell
Set-MalwareFilterRule -Identity "<RuleName>" <Settings>
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [Set-MalwareFilterRule](/powershell/module/exchange/set-malwarefilterrule).

### <a name="use-powershell-to-enable-or-disable-malware-filter-rules"></a>Usare PowerShell per abilitare o disabilitare le regole di filtro antimalware

L'abilitazione o la disabilitazione di una regola di filtro antimalware in PowerShell abilita o disabilita l'intero criterio antimalware (la regola di filtro antimalware e il criterio di filtro antimalware assegnato). Non è possibile abilitare o disabilitare il criterio antimalware predefinito (viene sempre applicato a tutti i destinatari).

Per abilitare o disabilitare una regola di filtro antimalware in PowerShell, utilizzare questa sintassi:

```PowerShell
<Enable-MalwareFilterRule | Disable-MalwareFilterRule> -Identity "<RuleName>"
```

In questo esempio viene disabilitata la regola di filtro antimalware denominata Marketing Department.

```PowerShell
Disable-MalwareFilterRule -Identity "Marketing Department"
```

In questo esempio viene abilitata la stessa regola.

```PowerShell
Enable-MalwareFilterRule -Identity "Marketing Department"
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [Enable-MalwareFilterRule](/powershell/module/exchange/enable-malwarefilterrule) e [Disable-MalwareFilterRule](/powershell/module/exchange/disable-malwarefilterrule).

### <a name="use-powershell-to-set-the-priority-of-malware-filter-rules"></a>Utilizzare PowerShell per impostare la priorità delle regole di filtro antimalware

Il valore di priorità più alto che è possibile impostare in una regola è 0. Il valore più basso che è possibile impostare dipende dal numero di regole. Se si dispone di cinque regole predefinite, è possibile utilizzare i valori di priorità da 0 a 4. Modificare la priorità di una regola esistente può avere un effetto a catena su altre regole. Ad esempio, se si dispone di cinque regole (priorità da 0 a 4) e si modifica la priorità di una regola a 2, la regola esistente con priorità 2 viene modificata a livello di priorità 3 e la regola con priorità 3 viene modificata a livello di priorità 4.

Per impostare la priorità di una regola di filtro antimalware in PowerShell, utilizzare la sintassi seguente:

```PowerShell
Set-MalwareFilterRule -Identity "<RuleName>" -Priority <Number>
```

Nell'esempio seguente la priorità della regola denominata Marketing Department viene impostata su 2. Tutte le regole esistenti che hanno una priorità minore o uguale a 2 vengono abbassate di 1 valore (i numeri di priorità vengono aumentati di 1).

```PowerShell
Set-MalwareFilterRule -Identity "Marketing Department" -Priority 2
```

**Note**:

- Per impostare la priorità di una nuova regola al momento della creazione, utilizzare il parametro _Priority_ nel cmdlet **New-MalwareFilterRule.**
- Il criterio di filtro antimalware predefinito non dispone di una regola di filtro antimalware corrispondente e ha sempre il valore di priorità non modificabile **Lowest**.

### <a name="use-powershell-to-remove-malware-filter-policies"></a>Usare PowerShell per rimuovere i criteri di filtro antimalware

Quando si utilizza PowerShell per rimuovere un criterio di filtro antimalware, la regola di filtro antimalware corrispondente non viene rimossa.

Per rimuovere un criterio di filtro antimalware in PowerShell, utilizzare la sintassi seguente:

```PowerShell
Remove-MalwareFilterPolicy -Identity "<PolicyName>"
```

In questo esempio viene rimosso il criterio di filtro antimalware denominato Marketing Department.

```PowerShell
Remove-MalwareFilterPolicy -Identity "Marketing Department"
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [Remove-MalwareFilterPolicy](/powershell/module/exchange/remove-malwarefilterpolicy).

### <a name="use-powershell-to-remove-malware-filter-rules"></a>Usare PowerShell per rimuovere le regole di filtro antimalware

Quando si utilizza PowerShell per rimuovere una regola di filtro antimalware, il criterio di filtro antimalware corrispondente non viene rimosso.

Per rimuovere una regola di filtro antimalware in PowerShell, utilizzare la sintassi seguente:

```PowerShell
Remove-MalwareFilterRule -Identity "<PolicyName>"
```

In questo esempio viene rimossa la regola di filtro antimalware denominata Marketing Department.

```PowerShell
Remove-MalwareFilterRule -Identity "Marketing Department"
```

Per informazioni dettagliate sulla sintassi e sui parametri, vedere [Remove-MalwareFilterRule](/powershell/module/exchange/remove-malwarefilterrule).

## <a name="how-do-you-know-these-procedures-worked"></a>Come verificare se queste procedure hanno avuto esito positivo?

### <a name="use-the-eicartxt-file-to-verify-your-anti-malware-policy-settings"></a>Usare il file EICAR.TXT per verificare le impostazioni dei criteri antimalware

> [!IMPORTANT]
> Il file EICAR.TXT non è un virus. L'Istituto europeo per la ricerca antivirus informatica (EICAR) ha sviluppato questo file per testare in modo sicuro le installazioni e le impostazioni antivirus.

1. Aprire Blocco note e incollare il testo seguente in un file vuoto:

   ```Text
   X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H*
   ```

   Assicurarsi che questi siano gli unici caratteri di testo nel file. La dimensione del file deve essere di 68 byte.

2. Salvare il file con nome EICAR.TXT

   Nel programma antivirus desktop, assicurarsi di escludere il EICAR.TXT dall'analisi (in caso contrario, il file verrà messo in quarantena).

3. Inviare un messaggio di posta elettronica contenente il file EICAR.TXT come allegato, utilizzando un client di posta elettronica che non blocca automaticamente il file. Utilizzare le impostazioni dei criteri antimalware per determinare gli scenari seguenti da testare:
   - Posta elettronica da una cassetta postale interna a un destinatario interno.
   - Posta elettronica da una cassetta postale interna a un destinatario esterno.
   - Posta elettronica da una cassetta postale esterna a un destinatario interno.

4. Verificare che il messaggio sia stato messo in quarantena e verificare i risultati della notifica del mittente e del destinatario in base alle impostazioni dei criteri antimalware. Ad esempio:

   - I destinatari non ricevono una notifica o i destinatari ricevono il messaggio originale con l'allegato EICAR.TXT sostituito dal Text.txtdi avviso **antimalware** che contiene il testo predefinito o personalizzato.
   - I mittenti interni o esterni vengono informati con i messaggi di notifica predefiniti o personalizzati.
   - L'indirizzo di posta elettronica dell'amministratore specificato viene notificato ai mittenti di messaggi interni o esterni, con i messaggi di notifica predefiniti o personalizzati.

5. Elimina il file EICAR.TXT al termine del test (in modo che altri utenti non siano inutilmente allarmati da esso).
