---
title: Isolamento del tenant per la funzionalità di ricerca di Microsoft 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: In questo articolo, trovare una spiegazione del funzionamento dell'isolamento del tenant per separare i dati del tenant in Microsoft 365 Ricerca.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 3416afdeceaa7000b516ec89b4a2a1e59d8708d0
ms.sourcegitcommit: 27addd4dac07926528b788215d2dcd0e46301eb1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/16/2021
ms.locfileid: "53464085"
---
# <a name="tenant-isolation-in-microsoft-365-search"></a><span data-ttu-id="4a717-103">Isolamento del tenant per la funzionalità di ricerca di Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="4a717-103">Tenant Isolation in Microsoft 365 Search</span></span>

<span data-ttu-id="4a717-104">SharePoint La ricerca online usa un modello di separazione dei tenant che bilancia l'efficienza delle strutture di dati condivise con la protezione dalle perdite di informazioni tra tenant.</span><span class="sxs-lookup"><span data-stu-id="4a717-104">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants.</span></span> <span data-ttu-id="4a717-105">Con questo modello, impediamo alle funzionalità di ricerca di:</span><span class="sxs-lookup"><span data-stu-id="4a717-105">With this model, we prevent the Search features from:</span></span>

- <span data-ttu-id="4a717-106">Restituzione dei risultati delle query contenenti documenti di altri tenant</span><span class="sxs-lookup"><span data-stu-id="4a717-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="4a717-107">Esposizione di informazioni sufficienti nei risultati delle query che un utente esperto potrebbe dedurre informazioni su altri tenant</span><span class="sxs-lookup"><span data-stu-id="4a717-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="4a717-108">Visualizzazione dello schema o delle impostazioni di un altro tenant</span><span class="sxs-lookup"><span data-stu-id="4a717-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="4a717-109">La combinazione delle informazioni di elaborazione dell'analisi tra tenant o archivio comporta un tenant errato</span><span class="sxs-lookup"><span data-stu-id="4a717-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="4a717-110">Utilizzo di voci di dizionario da un altro tenant</span><span class="sxs-lookup"><span data-stu-id="4a717-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="4a717-111">Per ogni tipo di dati del tenant, usiamo uno o più livelli di protezione nel codice per evitare perdite accidentali di informazioni.</span><span class="sxs-lookup"><span data-stu-id="4a717-111">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information.</span></span> <span data-ttu-id="4a717-112">I dati più critici hanno il maggior numero di livelli di protezione per assicurarsi che un singolo difetto non causa perdite di informazioni effettive o percepite.</span><span class="sxs-lookup"><span data-stu-id="4a717-112">The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="4a717-113">Separazione tenant per l'indice di ricerca</span><span class="sxs-lookup"><span data-stu-id="4a717-113">Tenant Separation for the Search Index</span></span>

<span data-ttu-id="4a717-114">L'indice di ricerca viene archiviato su disco nei server che ospitano i componenti di indicizzazione e i tenant condividono i file di indice.</span><span class="sxs-lookup"><span data-stu-id="4a717-114">The search index is stored on disk in the servers hosting the index components and the tenants share the index files.</span></span> <span data-ttu-id="4a717-115">I documenti indicizzati di un tenant sono visibili solo per le query per tale tenant.</span><span class="sxs-lookup"><span data-stu-id="4a717-115">A tenant's indexed documents are visible only for queries for that tenant.</span></span> <span data-ttu-id="4a717-116">Tre meccanismi indipendenti impediscono la perdita di informazioni:</span><span class="sxs-lookup"><span data-stu-id="4a717-116">Three independent mechanisms prevent information leakage:</span></span>

- <span data-ttu-id="4a717-117">Filtro ID tenant</span><span class="sxs-lookup"><span data-stu-id="4a717-117">Tenant ID filtering</span></span>
- <span data-ttu-id="4a717-118">Prefisso del termine ID tenant</span><span class="sxs-lookup"><span data-stu-id="4a717-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="4a717-119">Controlli ACL</span><span class="sxs-lookup"><span data-stu-id="4a717-119">ACL checks</span></span>

<span data-ttu-id="4a717-120">Tutti e tre i meccanismi devono avere esito negativo per la ricerca per restituire i documenti al tenant sbagliato.</span><span class="sxs-lookup"><span data-stu-id="4a717-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="4a717-121">Filtro ID tenant e Prefisso termine ID tenant</span><span class="sxs-lookup"><span data-stu-id="4a717-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>

<span data-ttu-id="4a717-122">La ricerca prefissi ogni termine indicizzato nell'indice full-text con l'ID tenant.</span><span class="sxs-lookup"><span data-stu-id="4a717-122">Search prefixes every term that is indexed in the full-text index with the tenant ID.</span></span> <span data-ttu-id="4a717-123">Ad esempio, quando il termine " foo " è *indicizzato* per un tenant con ID "*123*", la voce nell'indice full-text è "*123foo".*</span><span class="sxs-lookup"><span data-stu-id="4a717-123">For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="4a717-124">Ogni query viene convertita per includere l'ID tenant utilizzando un processo denominato filtro ID tenant.</span><span class="sxs-lookup"><span data-stu-id="4a717-124">Every query is converted to include the tenant ID using a process called tenant ID filtering.</span></span> <span data-ttu-id="4a717-125">Ad esempio, la query "*foo*" viene convertita in "<*guid*>. *foo* AND *tenantID*:<*guid*>", dove <guid *>* rappresenta il tenant che esegue la query.</span><span class="sxs-lookup"><span data-stu-id="4a717-125">For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query.</span></span> <span data-ttu-id="4a717-126">Questa conversione di query si verifica all'interno di ogni nodo di indice e nessuna query né l'elaborazione del contenuto possono influenzarla.</span><span class="sxs-lookup"><span data-stu-id="4a717-126">This query conversion occurs within each index node and neither query nor content processing can influence it.</span></span> <span data-ttu-id="4a717-127">Poiché l'ID tenant viene aggiunto a ogni query, non è possibile dedurre la frequenza di un termine in altri tenant esaminando la classificazione delle corrispondenze migliori in un tenant.</span><span class="sxs-lookup"><span data-stu-id="4a717-127">Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="4a717-128">Il prefisso dei termini dell'ID tenant si verifica solo nell'indice full-text.</span><span class="sxs-lookup"><span data-stu-id="4a717-128">Tenant ID term prefixing occurs only in the full-text index.</span></span> <span data-ttu-id="4a717-129">Le ricerche in campi, ad esempio "*title:foo*", passano a un indice di ricerca sintetica in cui i termini non sono preceduti dall'ID tenant.</span><span class="sxs-lookup"><span data-stu-id="4a717-129">Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID.</span></span> <span data-ttu-id="4a717-130">Le ricerche campite vengono invece precedute dal nome del campo.</span><span class="sxs-lookup"><span data-stu-id="4a717-130">Instead, fielded searches are prefixed with the field name.</span></span> <span data-ttu-id="4a717-131">Ad esempio, la query "*title:foo*" viene convertita in "*fields.title:foo AND fields.tenantID*:<*guid*>".</span><span class="sxs-lookup"><span data-stu-id="4a717-131">For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>."</span></span> <span data-ttu-id="4a717-132">Poiché la frequenza di un termine non influisce sulla classificazione degli accessi nell'indice di ricerca sintetica, non è necessaria la separazione del tenant per prefisso di termine.</span><span class="sxs-lookup"><span data-stu-id="4a717-132">Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing.</span></span> <span data-ttu-id="4a717-133">Per una ricerca in campo come "*title:foo*", la separazione del contenuto del tenant dipende dal filtro dell'ID tenant in base alla conversione di query.</span><span class="sxs-lookup"><span data-stu-id="4a717-133">For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="4a717-134">Controlli elenco di controllo di accesso ai documenti</span><span class="sxs-lookup"><span data-stu-id="4a717-134">Document Access Control List Checks</span></span>

<span data-ttu-id="4a717-135">La ricerca controlla l'accesso ai documenti tramite gli ACL salvati nell'indice di ricerca.</span><span class="sxs-lookup"><span data-stu-id="4a717-135">Search controls access to documents through ACLs that are saved in the search index.</span></span> <span data-ttu-id="4a717-136">Ogni elemento viene indicizzato con un set di termini in un campo ACL speciale.</span><span class="sxs-lookup"><span data-stu-id="4a717-136">Every item is indexed with a set of terms in a special ACL field.</span></span> <span data-ttu-id="4a717-137">Il campo ACL contiene un termine per gruppo o utente che può visualizzare il documento.</span><span class="sxs-lookup"><span data-stu-id="4a717-137">The ACL field contains one term per group or user that can view the document.</span></span> <span data-ttu-id="4a717-138">A ogni query viene associato un elenco di termini di voce di controllo di accesso (ACE), uno per ogni gruppo a cui appartiene l'utente autenticato.</span><span class="sxs-lookup"><span data-stu-id="4a717-138">Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="4a717-139">Ad esempio, una query come "<*guid>.* *foo AND tenantID*:<*guid*>" diventa: "<*guid*>. *foo AND tenantID*:<*guid* >  *AND* (*docACL:* < *ace1* >  *OR docACL*:<*ace2* >  *OR docACL*:<*ace3* >  *...*)"</span><span class="sxs-lookup"><span data-stu-id="4a717-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="4a717-140">Poiché gli identificatori di utenti e gruppi e quindi le voci di controllo di accesso sono univoci, questo offre un ulteriore livello di sicurezza tra i tenant per i documenti visibili solo ad alcuni utenti.</span><span class="sxs-lookup"><span data-stu-id="4a717-140">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users.</span></span> <span data-ttu-id="4a717-141">Lo stesso vale per la speciale ACE "Tutti tranne gli utenti esterni" che concede l'accesso agli utenti normali nel tenant.</span><span class="sxs-lookup"><span data-stu-id="4a717-141">The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant.</span></span> <span data-ttu-id="4a717-142">Tuttavia, poiché le voci di controllo di accesso per "Tutti" sono le stesse per tutti i tenant, la separazione dei tenant per i documenti pubblici dipende dal filtro degli ID tenant.</span><span class="sxs-lookup"><span data-stu-id="4a717-142">But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering.</span></span> <span data-ttu-id="4a717-143">Sono supportate anche le voci di controllo di accesso negate.</span><span class="sxs-lookup"><span data-stu-id="4a717-143">Deny ACEs are also supported.</span></span> <span data-ttu-id="4a717-144">L'aumento delle query aggiunge una clausola che rimuove un documento dal risultato quando esiste una corrispondenza con una ACE negata.</span><span class="sxs-lookup"><span data-stu-id="4a717-144">The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="4a717-145">In Exchange Online ricerca, l'indice viene partizionato sull'ID cassetta postale per le cassette postali dei singoli utenti anziché sull'ID tenant (ID sottoscrizione) come in SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="4a717-145">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online.</span></span> <span data-ttu-id="4a717-146">Il meccanismo di partizionamento è lo stesso SharePoint Online, ma non è disponibile alcun filtro ACL.</span><span class="sxs-lookup"><span data-stu-id="4a717-146">The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
